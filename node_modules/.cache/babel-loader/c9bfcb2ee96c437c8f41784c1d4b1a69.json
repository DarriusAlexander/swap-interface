{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  padding: 60px 0;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 24px;\\n  position: relative;\\n  background: \",\";\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\\n  background: radial-gradient(76.02% 75.41% at 1.84% 0%, #ff007a 0%, #021d43 100%);\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import{JSBI,TokenAmount}from'@uniswap/sdk';import{isAddress}from'ethers/lib/utils';import React,{useEffect,useState}from'react';import{Text}from'rebass';import styled from'styled-components';import Circle from\"../../assets/images/blue-loader.svg\";import tokenLogo from'../../assets/images/token-logo.png';import{useActiveWeb3React}from'../../hooks';import{ApplicationModal}from'../../state/application/actions';import{useModalOpen,useToggleSelfClaimModal}from'../../state/application/hooks';import{useClaimCallback,useUserClaimData,useUserUnclaimedAmount}from'../../state/claim/hooks';import{useUserHasSubmittedClaim}from'../../state/transactions/hooks';import{CloseIcon,CustomLightSpinner,ExternalLink,TYPE,UniTokenAnimated}from'../../theme';import{getEtherscanLink}from'../../utils';import{ButtonPrimary}from'../Button';import{AutoColumn,ColumnCenter}from'../Column';import Confetti from'../Confetti';import{Break,CardBGImage,CardBGImageSmaller,CardNoise,CardSection,DataCard}from'../earn/styled';import Modal from'../Modal';import{RowBetween}from'../Row';var ContentWrapper=styled(AutoColumn)(_templateObject());var ModalUpper=styled(DataCard)(_templateObject2());var ConfirmOrLoadingWrapper=styled.div(_templateObject3(),function(_ref){var activeBG=_ref.activeBG;return activeBG&&'radial-gradient(76.02% 75.41% at 1.84% 0%, rgba(255, 0, 122, 0.2) 0%, rgba(33, 114, 229, 0.2) 100%), #FFFFFF;';});var ConfirmedIcon=styled(ColumnCenter)(_templateObject4());var SOCKS_AMOUNT=1000;var USER_AMOUNT=400;export default function ClaimModal(){var _userClaimData$flags,_userClaimData$flags2,_groupSeparator,_userClaimData$flags3,_userClaimData$flags4,_userClaimData$flags5,_groupSeparator2;var isOpen=useModalOpen(ApplicationModal.SELF_CLAIM);var toggleClaimModal=useToggleSelfClaimModal();var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId;// used for UI loading states\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),attempting=_useState2[0],setAttempting=_useState2[1];// get user claim data\nvar userClaimData=useUserClaimData(account);// monitor the status of the claim from contracts and txns\nvar _useClaimCallback=useClaimCallback(account),claimCallback=_useClaimCallback.claimCallback;var unclaimedAmount=useUserUnclaimedAmount(account);var _useUserHasSubmittedC=useUserHasSubmittedClaim(account!==null&&account!==void 0?account:undefined),claimSubmitted=_useUserHasSubmittedC.claimSubmitted,claimTxn=_useUserHasSubmittedC.claimTxn;var claimConfirmed=Boolean(claimTxn===null||claimTxn===void 0?void 0:claimTxn.receipt);function onClaim(){setAttempting(true);claimCallback()// reset modal and log error\n.catch(function(error){setAttempting(false);console.log(error);});}// once confirmed txn is found, if modal is closed open, mark as not attempting regradless\nuseEffect(function(){if(claimConfirmed&&claimSubmitted&&attempting){setAttempting(false);if(!isOpen){toggleClaimModal();}}},[attempting,claimConfirmed,claimSubmitted,isOpen,toggleClaimModal]);var nonLPAmount=JSBI.multiply(JSBI.BigInt(((userClaimData===null||userClaimData===void 0?void 0:(_userClaimData$flags=userClaimData.flags)===null||_userClaimData$flags===void 0?void 0:_userClaimData$flags.isSOCKS)?SOCKS_AMOUNT:0)+((userClaimData===null||userClaimData===void 0?void 0:(_userClaimData$flags2=userClaimData.flags)===null||_userClaimData$flags2===void 0?void 0:_userClaimData$flags2.isUser)?USER_AMOUNT:0)),JSBI.exponentiate(JSBI.BigInt(10),JSBI.BigInt(18)));return/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,onDismiss:toggleClaimModal,maxHeight:90},/*#__PURE__*/React.createElement(Confetti,{start:Boolean(isOpen&&claimConfirmed)}),!attempting&&!claimConfirmed&&/*#__PURE__*/React.createElement(ContentWrapper,{gap:\"lg\"},/*#__PURE__*/React.createElement(ModalUpper,null,/*#__PURE__*/React.createElement(CardBGImage,null),/*#__PURE__*/React.createElement(CardNoise,null),/*#__PURE__*/React.createElement(CardSection,{gap:\"md\"},/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(TYPE.white,{fontWeight:500},\"Claim UNI\"),/*#__PURE__*/React.createElement(CloseIcon,{onClick:toggleClaimModal,style:{zIndex:99},color:\"white\"})),/*#__PURE__*/React.createElement(TYPE.white,{fontWeight:700,fontSize:36},unclaimedAmount===null||unclaimedAmount===void 0?void 0:unclaimedAmount.toFixed(0,(_groupSeparator={groupSeparator:','})!==null&&_groupSeparator!==void 0?_groupSeparator:'-'),\" UNI\")),/*#__PURE__*/React.createElement(Break,null),/*#__PURE__*/React.createElement(CardSection,{gap:\"sm\"},(userClaimData===null||userClaimData===void 0?void 0:(_userClaimData$flags3=userClaimData.flags)===null||_userClaimData$flags3===void 0?void 0:_userClaimData$flags3.isSOCKS)&&/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(TYPE.subHeader,{color:\"white\"},\"SOCKS\"),/*#__PURE__*/React.createElement(TYPE.subHeader,{color:\"white\"},SOCKS_AMOUNT,\" UNI\")),(userClaimData===null||userClaimData===void 0?void 0:(_userClaimData$flags4=userClaimData.flags)===null||_userClaimData$flags4===void 0?void 0:_userClaimData$flags4.isLP)&&unclaimedAmount&&JSBI.greaterThanOrEqual(unclaimedAmount.raw,nonLPAmount)&&/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(TYPE.subHeader,{color:\"white\"},\"Liquidity\"),/*#__PURE__*/React.createElement(TYPE.subHeader,{color:\"white\"},unclaimedAmount.subtract(new TokenAmount(unclaimedAmount.token,nonLPAmount)).toFixed(0,{groupSeparator:','}),' ',\"UNI\")),(userClaimData===null||userClaimData===void 0?void 0:(_userClaimData$flags5=userClaimData.flags)===null||_userClaimData$flags5===void 0?void 0:_userClaimData$flags5.isUser)&&/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(TYPE.subHeader,{color:\"white\"},\"User\"),/*#__PURE__*/React.createElement(TYPE.subHeader,{color:\"white\"},USER_AMOUNT,\" UNI\")))),/*#__PURE__*/React.createElement(AutoColumn,{gap:\"md\",style:{padding:'1rem',paddingTop:'0'},justify:\"center\"},/*#__PURE__*/React.createElement(TYPE.subHeader,{fontWeight:500},\"As a member of the Uniswap community you may claim UNI to be used for voting and governance. \",/*#__PURE__*/React.createElement(\"br\",null),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(ExternalLink,{href:\"https://uniswap.org/blog/uni\"},\"Read more about UNI\")),/*#__PURE__*/React.createElement(ButtonPrimary,{disabled:!isAddress(account!==null&&account!==void 0?account:''),padding:\"16px 16px\",width:\"100%\",borderRadius:\"12px\",mt:\"1rem\",onClick:onClaim},\"Claim UNI\"))),(attempting||claimConfirmed)&&/*#__PURE__*/React.createElement(ConfirmOrLoadingWrapper,{activeBG:true},/*#__PURE__*/React.createElement(CardNoise,null),/*#__PURE__*/React.createElement(CardBGImageSmaller,{desaturate:true}),/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(CloseIcon,{onClick:toggleClaimModal,style:{zIndex:99},stroke:\"black\"})),/*#__PURE__*/React.createElement(ConfirmedIcon,null,!claimConfirmed?/*#__PURE__*/React.createElement(CustomLightSpinner,{src:Circle,alt:\"loader\",size:'90px'}):/*#__PURE__*/React.createElement(UniTokenAnimated,{width:\"72px\",src:tokenLogo})),/*#__PURE__*/React.createElement(AutoColumn,{gap:\"100px\",justify:'center'},/*#__PURE__*/React.createElement(AutoColumn,{gap:\"12px\",justify:'center'},/*#__PURE__*/React.createElement(TYPE.largeHeader,{fontWeight:600,color:\"black\"},claimConfirmed?'Claimed!':'Claiming'),!claimConfirmed&&/*#__PURE__*/React.createElement(Text,{fontSize:36,color:'#ff007a',fontWeight:800},unclaimedAmount===null||unclaimedAmount===void 0?void 0:unclaimedAmount.toFixed(0,(_groupSeparator2={groupSeparator:','})!==null&&_groupSeparator2!==void 0?_groupSeparator2:'-'),\" UNI\")),claimConfirmed&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(TYPE.subHeader,{fontWeight:500,color:\"black\"},/*#__PURE__*/React.createElement(\"span\",{role:\"img\",\"aria-label\":\"party-hat\"},\"\\uD83C\\uDF89\",' '),\"Welcome to team Unicorn :)\",' ',/*#__PURE__*/React.createElement(\"span\",{role:\"img\",\"aria-label\":\"party-hat\"},\"\\uD83C\\uDF89\"))),attempting&&!claimSubmitted&&/*#__PURE__*/React.createElement(TYPE.subHeader,{color:\"black\"},\"Confirm this transaction in your wallet\"),attempting&&claimSubmitted&&!claimConfirmed&&chainId&&(claimTxn===null||claimTxn===void 0?void 0:claimTxn.hash)&&/*#__PURE__*/React.createElement(ExternalLink,{href:getEtherscanLink(chainId,claimTxn===null||claimTxn===void 0?void 0:claimTxn.hash,'transaction'),style:{zIndex:99}},\"View transaction on Etherscan\"))));}","map":{"version":3,"sources":["C:/Users/Darrius/Documents/GitHub/swap-interface/src/components/claim/ClaimModal.tsx"],"names":["JSBI","TokenAmount","isAddress","React","useEffect","useState","Text","styled","tokenLogo","useActiveWeb3React","ApplicationModal","useModalOpen","useToggleSelfClaimModal","useClaimCallback","useUserClaimData","useUserUnclaimedAmount","useUserHasSubmittedClaim","CloseIcon","CustomLightSpinner","ExternalLink","TYPE","UniTokenAnimated","getEtherscanLink","ButtonPrimary","AutoColumn","ColumnCenter","Confetti","Break","CardBGImage","CardBGImageSmaller","CardNoise","CardSection","DataCard","Modal","RowBetween","ContentWrapper","ModalUpper","ConfirmOrLoadingWrapper","div","activeBG","ConfirmedIcon","SOCKS_AMOUNT","USER_AMOUNT","ClaimModal","isOpen","SELF_CLAIM","toggleClaimModal","account","chainId","attempting","setAttempting","userClaimData","claimCallback","unclaimedAmount","undefined","claimSubmitted","claimTxn","claimConfirmed","Boolean","receipt","onClaim","catch","error","console","log","nonLPAmount","multiply","BigInt","flags","isSOCKS","isUser","exponentiate","zIndex","toFixed","groupSeparator","isLP","greaterThanOrEqual","raw","subtract","token","padding","paddingTop","Circle","hash"],"mappings":"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","sourcesContent":["import { JSBI, TokenAmount } from '@uniswap/sdk'\r\nimport { isAddress } from 'ethers/lib/utils'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Text } from 'rebass'\r\nimport styled from 'styled-components'\r\nimport Circle from '../../assets/images/blue-loader.svg'\r\nimport tokenLogo from '../../assets/images/token-logo.png'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { ApplicationModal } from '../../state/application/actions'\r\nimport { useModalOpen, useToggleSelfClaimModal } from '../../state/application/hooks'\r\nimport { useClaimCallback, useUserClaimData, useUserUnclaimedAmount } from '../../state/claim/hooks'\r\nimport { useUserHasSubmittedClaim } from '../../state/transactions/hooks'\r\nimport { CloseIcon, CustomLightSpinner, ExternalLink, TYPE, UniTokenAnimated } from '../../theme'\r\nimport { getEtherscanLink } from '../../utils'\r\nimport { ButtonPrimary } from '../Button'\r\nimport { AutoColumn, ColumnCenter } from '../Column'\r\nimport Confetti from '../Confetti'\r\nimport { Break, CardBGImage, CardBGImageSmaller, CardNoise, CardSection, DataCard } from '../earn/styled'\r\n\r\nimport Modal from '../Modal'\r\nimport { RowBetween } from '../Row'\r\n\r\nconst ContentWrapper = styled(AutoColumn)`\r\n  width: 100%;\r\n`\r\n\r\nconst ModalUpper = styled(DataCard)`\r\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);\r\n  background: radial-gradient(76.02% 75.41% at 1.84% 0%, #ff007a 0%, #021d43 100%);\r\n`\r\n\r\nconst ConfirmOrLoadingWrapper = styled.div<{ activeBG: boolean }>`\r\n  width: 100%;\r\n  padding: 24px;\r\n  position: relative;\r\n  background: ${({ activeBG }) =>\r\n    activeBG &&\r\n    'radial-gradient(76.02% 75.41% at 1.84% 0%, rgba(255, 0, 122, 0.2) 0%, rgba(33, 114, 229, 0.2) 100%), #FFFFFF;'};\r\n`\r\n\r\nconst ConfirmedIcon = styled(ColumnCenter)`\r\n  padding: 60px 0;\r\n`\r\n\r\nconst SOCKS_AMOUNT = 1000\r\nconst USER_AMOUNT = 400\r\n\r\nexport default function ClaimModal() {\r\n  const isOpen = useModalOpen(ApplicationModal.SELF_CLAIM)\r\n  const toggleClaimModal = useToggleSelfClaimModal()\r\n\r\n  const { account, chainId } = useActiveWeb3React()\r\n\r\n  // used for UI loading states\r\n  const [attempting, setAttempting] = useState<boolean>(false)\r\n\r\n  // get user claim data\r\n  const userClaimData = useUserClaimData(account)\r\n\r\n  // monitor the status of the claim from contracts and txns\r\n  const { claimCallback } = useClaimCallback(account)\r\n  const unclaimedAmount: TokenAmount | undefined = useUserUnclaimedAmount(account)\r\n  const { claimSubmitted, claimTxn } = useUserHasSubmittedClaim(account ?? undefined)\r\n  const claimConfirmed = Boolean(claimTxn?.receipt)\r\n\r\n  function onClaim() {\r\n    setAttempting(true)\r\n    claimCallback()\r\n      // reset modal and log error\r\n      .catch(error => {\r\n        setAttempting(false)\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  // once confirmed txn is found, if modal is closed open, mark as not attempting regradless\r\n  useEffect(() => {\r\n    if (claimConfirmed && claimSubmitted && attempting) {\r\n      setAttempting(false)\r\n      if (!isOpen) {\r\n        toggleClaimModal()\r\n      }\r\n    }\r\n  }, [attempting, claimConfirmed, claimSubmitted, isOpen, toggleClaimModal])\r\n\r\n  const nonLPAmount = JSBI.multiply(\r\n    JSBI.BigInt((userClaimData?.flags?.isSOCKS ? SOCKS_AMOUNT : 0) + (userClaimData?.flags?.isUser ? USER_AMOUNT : 0)),\r\n    JSBI.exponentiate(JSBI.BigInt(10), JSBI.BigInt(18))\r\n  )\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onDismiss={toggleClaimModal} maxHeight={90}>\r\n      <Confetti start={Boolean(isOpen && claimConfirmed)} />\r\n      {!attempting && !claimConfirmed && (\r\n        <ContentWrapper gap=\"lg\">\r\n          <ModalUpper>\r\n            <CardBGImage />\r\n            <CardNoise />\r\n            <CardSection gap=\"md\">\r\n              <RowBetween>\r\n                <TYPE.white fontWeight={500}>Claim UNI</TYPE.white>\r\n                <CloseIcon onClick={toggleClaimModal} style={{ zIndex: 99 }} color=\"white\" />\r\n              </RowBetween>\r\n              <TYPE.white fontWeight={700} fontSize={36}>\r\n                {unclaimedAmount?.toFixed(0, { groupSeparator: ',' } ?? '-')} UNI\r\n              </TYPE.white>\r\n            </CardSection>\r\n            <Break />\r\n            <CardSection gap=\"sm\">\r\n              {userClaimData?.flags?.isSOCKS && (\r\n                <RowBetween>\r\n                  <TYPE.subHeader color=\"white\">SOCKS</TYPE.subHeader>\r\n                  <TYPE.subHeader color=\"white\">{SOCKS_AMOUNT} UNI</TYPE.subHeader>\r\n                </RowBetween>\r\n              )}\r\n              {userClaimData?.flags?.isLP &&\r\n                unclaimedAmount &&\r\n                JSBI.greaterThanOrEqual(unclaimedAmount.raw, nonLPAmount) && (\r\n                  <RowBetween>\r\n                    <TYPE.subHeader color=\"white\">Liquidity</TYPE.subHeader>\r\n                    <TYPE.subHeader color=\"white\">\r\n                      {unclaimedAmount\r\n                        .subtract(new TokenAmount(unclaimedAmount.token, nonLPAmount))\r\n                        .toFixed(0, { groupSeparator: ',' })}{' '}\r\n                      UNI\r\n                    </TYPE.subHeader>\r\n                  </RowBetween>\r\n                )}\r\n              {userClaimData?.flags?.isUser && (\r\n                <RowBetween>\r\n                  <TYPE.subHeader color=\"white\">User</TYPE.subHeader>\r\n                  <TYPE.subHeader color=\"white\">{USER_AMOUNT} UNI</TYPE.subHeader>\r\n                </RowBetween>\r\n              )}\r\n            </CardSection>\r\n          </ModalUpper>\r\n          <AutoColumn gap=\"md\" style={{ padding: '1rem', paddingTop: '0' }} justify=\"center\">\r\n            <TYPE.subHeader fontWeight={500}>\r\n              As a member of the Uniswap community you may claim UNI to be used for voting and governance. <br /> <br />\r\n              <ExternalLink href=\"https://uniswap.org/blog/uni\">Read more about UNI</ExternalLink>\r\n            </TYPE.subHeader>\r\n            <ButtonPrimary\r\n              disabled={!isAddress(account ?? '')}\r\n              padding=\"16px 16px\"\r\n              width=\"100%\"\r\n              borderRadius=\"12px\"\r\n              mt=\"1rem\"\r\n              onClick={onClaim}\r\n            >\r\n              Claim UNI\r\n            </ButtonPrimary>\r\n          </AutoColumn>\r\n        </ContentWrapper>\r\n      )}\r\n      {(attempting || claimConfirmed) && (\r\n        <ConfirmOrLoadingWrapper activeBG={true}>\r\n          <CardNoise />\r\n          <CardBGImageSmaller desaturate />\r\n          <RowBetween>\r\n            <div />\r\n            <CloseIcon onClick={toggleClaimModal} style={{ zIndex: 99 }} stroke=\"black\" />\r\n          </RowBetween>\r\n          <ConfirmedIcon>\r\n            {!claimConfirmed ? (\r\n              <CustomLightSpinner src={Circle} alt=\"loader\" size={'90px'} />\r\n            ) : (\r\n              <UniTokenAnimated width=\"72px\" src={tokenLogo} />\r\n            )}\r\n          </ConfirmedIcon>\r\n          <AutoColumn gap=\"100px\" justify={'center'}>\r\n            <AutoColumn gap=\"12px\" justify={'center'}>\r\n              <TYPE.largeHeader fontWeight={600} color=\"black\">\r\n                {claimConfirmed ? 'Claimed!' : 'Claiming'}\r\n              </TYPE.largeHeader>\r\n              {!claimConfirmed && (\r\n                <Text fontSize={36} color={'#ff007a'} fontWeight={800}>\r\n                  {unclaimedAmount?.toFixed(0, { groupSeparator: ',' } ?? '-')} UNI\r\n                </Text>\r\n              )}\r\n            </AutoColumn>\r\n            {claimConfirmed && (\r\n              <>\r\n                <TYPE.subHeader fontWeight={500} color=\"black\">\r\n                  <span role=\"img\" aria-label=\"party-hat\">\r\n                    🎉{' '}\r\n                  </span>\r\n                  Welcome to team Unicorn :){' '}\r\n                  <span role=\"img\" aria-label=\"party-hat\">\r\n                    🎉\r\n                  </span>\r\n                </TYPE.subHeader>\r\n              </>\r\n            )}\r\n            {attempting && !claimSubmitted && (\r\n              <TYPE.subHeader color=\"black\">Confirm this transaction in your wallet</TYPE.subHeader>\r\n            )}\r\n            {attempting && claimSubmitted && !claimConfirmed && chainId && claimTxn?.hash && (\r\n              <ExternalLink href={getEtherscanLink(chainId, claimTxn?.hash, 'transaction')} style={{ zIndex: 99 }}>\r\n                View transaction on Etherscan\r\n              </ExternalLink>\r\n            )}\r\n          </AutoColumn>\r\n        </ConfirmOrLoadingWrapper>\r\n      )}\r\n    </Modal>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}