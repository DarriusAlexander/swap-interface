{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{BigNumber}from'@ethersproject/bignumber';import{currencyEquals,ETHER,WETH}from'@uniswap/sdk';import React,{useCallback,useContext,useState}from'react';import{Plus}from'react-feather';import ReactGA from'react-ga';import{Text}from'rebass';import{ThemeContext}from'styled-components';import{ButtonError,ButtonLight,ButtonPrimary}from'../../components/Button';import{BlueCard,LightCard}from'../../components/Card';import{AutoColumn,ColumnCenter}from'../../components/Column';import TransactionConfirmationModal,{ConfirmationModalContent}from'../../components/TransactionConfirmationModal';import CurrencyInputPanel from'../../components/CurrencyInputPanel';import DoubleCurrencyLogo from'../../components/DoubleLogo';import{AddRemoveTabs}from'../../components/NavigationTabs';import{MinimalPositionCard}from'../../components/PositionCard';import Row,{RowBetween,RowFlat}from'../../components/Row';import{ROUTER_ADDRESS}from'../../constants';import{PairState}from'../../data/Reserves';import{useActiveWeb3React}from'../../hooks';import{useCurrency}from'../../hooks/Tokens';import{ApprovalState,useApproveCallback}from'../../hooks/useApproveCallback';import useTransactionDeadline from'../../hooks/useTransactionDeadline';import{useWalletModalToggle}from'../../state/application/hooks';import{Field}from'../../state/mint/actions';import{useDerivedMintInfo,useMintActionHandlers,useMintState}from'../../state/mint/hooks';import{useTransactionAdder}from'../../state/transactions/hooks';import{useIsExpertMode,useUserSlippageTolerance}from'../../state/user/hooks';import{TYPE}from'../../theme';import{calculateGasMargin,calculateSlippageAmount,getRouterContract}from'../../utils';import{maxAmountSpend}from'../../utils/maxAmountSpend';import{wrappedCurrency}from'../../utils/wrappedCurrency';import AppBody from'../AppBody';import{Dots,Wrapper}from'../Pool/styleds';import{ConfirmAddModalBottom}from'./ConfirmAddModalBottom';import{currencyId}from'../../utils/currencyId';import{PoolPriceBar}from'./PoolPriceBar';import{useIsTransactionUnsupported}from'hooks/Trades';import UnsupportedCurrencyFooter from'components/swap/UnsupportedCurrencyFooter';export default function AddLiquidity(_ref){var _parsedAmounts$depend,_parsedAmounts$depend2,_formattedAmounts,_parsedAmounts$Field$,_currencies$Field$CUR5,_parsedAmounts$Field$2,_currencies$Field$CUR6,_currencies$Field$CUR7,_currencies$Field$CUR8,_currencies$Field$CUR9,_currencies$Field$CUR10;var _ref$match$params=_ref.match.params,currencyIdA=_ref$match$params.currencyIdA,currencyIdB=_ref$match$params.currencyIdB,history=_ref.history;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId,library=_useActiveWeb3React.library;var theme=useContext(ThemeContext);var currencyA=useCurrency(currencyIdA);var currencyB=useCurrency(currencyIdB);var oneCurrencyIsWETH=Boolean(chainId&&(currencyA&&currencyEquals(currencyA,WETH[chainId])||currencyB&&currencyEquals(currencyB,WETH[chainId])));var toggleWalletModal=useWalletModalToggle();// toggle wallet when disconnected\nvar expertMode=useIsExpertMode();// mint state\nvar _useMintState=useMintState(),independentField=_useMintState.independentField,typedValue=_useMintState.typedValue,otherTypedValue=_useMintState.otherTypedValue;var _useDerivedMintInfo=useDerivedMintInfo(currencyA!==null&&currencyA!==void 0?currencyA:undefined,currencyB!==null&&currencyB!==void 0?currencyB:undefined),dependentField=_useDerivedMintInfo.dependentField,currencies=_useDerivedMintInfo.currencies,pair=_useDerivedMintInfo.pair,pairState=_useDerivedMintInfo.pairState,currencyBalances=_useDerivedMintInfo.currencyBalances,parsedAmounts=_useDerivedMintInfo.parsedAmounts,price=_useDerivedMintInfo.price,noLiquidity=_useDerivedMintInfo.noLiquidity,liquidityMinted=_useDerivedMintInfo.liquidityMinted,poolTokenPercentage=_useDerivedMintInfo.poolTokenPercentage,error=_useDerivedMintInfo.error;var _useMintActionHandler=useMintActionHandlers(noLiquidity),onFieldAInput=_useMintActionHandler.onFieldAInput,onFieldBInput=_useMintActionHandler.onFieldBInput;var isValid=!error;// modal and loading\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showConfirm=_useState2[0],setShowConfirm=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),attemptingTxn=_useState4[0],setAttemptingTxn=_useState4[1];// clicked confirm\n// txn values\nvar deadline=useTransactionDeadline();// custom from users settings\nvar _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,1),allowedSlippage=_useUserSlippageToler2[0];// custom from users\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),txHash=_useState6[0],setTxHash=_useState6[1];// get formatted amounts\nvar formattedAmounts=(_formattedAmounts={},_defineProperty(_formattedAmounts,independentField,typedValue),_defineProperty(_formattedAmounts,dependentField,noLiquidity?otherTypedValue:(_parsedAmounts$depend=(_parsedAmounts$depend2=parsedAmounts[dependentField])===null||_parsedAmounts$depend2===void 0?void 0:_parsedAmounts$depend2.toSignificant(6))!==null&&_parsedAmounts$depend!==void 0?_parsedAmounts$depend:''),_formattedAmounts);// get the max amounts user can add\nvar maxAmounts=[Field.CURRENCY_A,Field.CURRENCY_B].reduce(function(accumulator,field){return _objectSpread(_objectSpread({},accumulator),{},_defineProperty({},field,maxAmountSpend(currencyBalances[field])));},{});var atMaxAmounts=[Field.CURRENCY_A,Field.CURRENCY_B].reduce(function(accumulator,field){var _maxAmounts$field,_parsedAmounts$field;return _objectSpread(_objectSpread({},accumulator),{},_defineProperty({},field,(_maxAmounts$field=maxAmounts[field])===null||_maxAmounts$field===void 0?void 0:_maxAmounts$field.equalTo((_parsedAmounts$field=parsedAmounts[field])!==null&&_parsedAmounts$field!==void 0?_parsedAmounts$field:'0')));},{});// check whether the user has approved the router on the tokens\nvar _useApproveCallback=useApproveCallback(parsedAmounts[Field.CURRENCY_A],ROUTER_ADDRESS),_useApproveCallback2=_slicedToArray(_useApproveCallback,2),approvalA=_useApproveCallback2[0],approveACallback=_useApproveCallback2[1];var _useApproveCallback3=useApproveCallback(parsedAmounts[Field.CURRENCY_B],ROUTER_ADDRESS),_useApproveCallback4=_slicedToArray(_useApproveCallback3,2),approvalB=_useApproveCallback4[0],approveBCallback=_useApproveCallback4[1];var addTransaction=useTransactionAdder();function onAdd(){return _onAdd.apply(this,arguments);}function _onAdd(){_onAdd=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _amountsMin;var router,parsedAmountA,parsedAmountB,amountsMin,estimate,method,args,value,_wrappedCurrency$addr,_wrappedCurrency,tokenBIsETH,_wrappedCurrency$addr2,_wrappedCurrency2,_wrappedCurrency$addr3,_wrappedCurrency3;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!chainId||!library||!account)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:router=getRouterContract(chainId,library,account);parsedAmountA=parsedAmounts[Field.CURRENCY_A],parsedAmountB=parsedAmounts[Field.CURRENCY_B];if(!(!parsedAmountA||!parsedAmountB||!currencyA||!currencyB||!deadline)){_context.next=6;break;}return _context.abrupt(\"return\");case 6:amountsMin=(_amountsMin={},_defineProperty(_amountsMin,Field.CURRENCY_A,calculateSlippageAmount(parsedAmountA,noLiquidity?0:allowedSlippage)[0]),_defineProperty(_amountsMin,Field.CURRENCY_B,calculateSlippageAmount(parsedAmountB,noLiquidity?0:allowedSlippage)[0]),_amountsMin);if(currencyA===ETHER||currencyB===ETHER){tokenBIsETH=currencyB===ETHER;estimate=router.estimateGas.addLiquidityETH;method=router.addLiquidityETH;args=[(_wrappedCurrency$addr=(_wrappedCurrency=wrappedCurrency(tokenBIsETH?currencyA:currencyB,chainId))===null||_wrappedCurrency===void 0?void 0:_wrappedCurrency.address)!==null&&_wrappedCurrency$addr!==void 0?_wrappedCurrency$addr:'',// token\n(tokenBIsETH?parsedAmountA:parsedAmountB).raw.toString(),// token desired\namountsMin[tokenBIsETH?Field.CURRENCY_A:Field.CURRENCY_B].toString(),// token min\namountsMin[tokenBIsETH?Field.CURRENCY_B:Field.CURRENCY_A].toString(),// eth min\naccount,deadline.toHexString()];value=BigNumber.from((tokenBIsETH?parsedAmountB:parsedAmountA).raw.toString());}else{estimate=router.estimateGas.addLiquidity;method=router.addLiquidity;args=[(_wrappedCurrency$addr2=(_wrappedCurrency2=wrappedCurrency(currencyA,chainId))===null||_wrappedCurrency2===void 0?void 0:_wrappedCurrency2.address)!==null&&_wrappedCurrency$addr2!==void 0?_wrappedCurrency$addr2:'',(_wrappedCurrency$addr3=(_wrappedCurrency3=wrappedCurrency(currencyB,chainId))===null||_wrappedCurrency3===void 0?void 0:_wrappedCurrency3.address)!==null&&_wrappedCurrency$addr3!==void 0?_wrappedCurrency$addr3:'',parsedAmountA.raw.toString(),parsedAmountB.raw.toString(),amountsMin[Field.CURRENCY_A].toString(),amountsMin[Field.CURRENCY_B].toString(),account,deadline.toHexString()];value=null;}setAttemptingTxn(true);_context.next=11;return estimate.apply(void 0,_toConsumableArray(args).concat([value?{value:value}:{}])).then(function(estimatedGasLimit){return method.apply(void 0,_toConsumableArray(args).concat([_objectSpread(_objectSpread({},value?{value:value}:{}),{},{gasLimit:calculateGasMargin(estimatedGasLimit)})])).then(function(response){var _parsedAmounts$Field$3,_currencies$Field$CUR11,_parsedAmounts$Field$4,_currencies$Field$CUR12,_currencies$Field$CUR13,_currencies$Field$CUR14;setAttemptingTxn(false);addTransaction(response,{summary:'Add '+((_parsedAmounts$Field$3=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$3===void 0?void 0:_parsedAmounts$Field$3.toSignificant(3))+' '+((_currencies$Field$CUR11=currencies[Field.CURRENCY_A])===null||_currencies$Field$CUR11===void 0?void 0:_currencies$Field$CUR11.symbol)+' and '+((_parsedAmounts$Field$4=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$4===void 0?void 0:_parsedAmounts$Field$4.toSignificant(3))+' '+((_currencies$Field$CUR12=currencies[Field.CURRENCY_B])===null||_currencies$Field$CUR12===void 0?void 0:_currencies$Field$CUR12.symbol)});setTxHash(response.hash);ReactGA.event({category:'Liquidity',action:'Add',label:[(_currencies$Field$CUR13=currencies[Field.CURRENCY_A])===null||_currencies$Field$CUR13===void 0?void 0:_currencies$Field$CUR13.symbol,(_currencies$Field$CUR14=currencies[Field.CURRENCY_B])===null||_currencies$Field$CUR14===void 0?void 0:_currencies$Field$CUR14.symbol].join('/')});});}).catch(function(error){setAttemptingTxn(false);// we only care if the error is something _other_ than the user rejected the tx\nif((error===null||error===void 0?void 0:error.code)!==4001){console.error(error);}});case 11:case\"end\":return _context.stop();}}},_callee);}));return _onAdd.apply(this,arguments);}var modalHeader=function modalHeader(){var _currencies$Field$CUR,_currencies$Field$CUR2,_currencies$Field$CUR3,_currencies$Field$CUR4;return noLiquidity?/*#__PURE__*/React.createElement(AutoColumn,{gap:\"20px\"},/*#__PURE__*/React.createElement(LightCard,{mt:\"20px\",borderRadius:\"20px\"},/*#__PURE__*/React.createElement(RowFlat,null,/*#__PURE__*/React.createElement(Text,{fontSize:\"48px\",fontWeight:500,lineHeight:\"42px\",marginRight:10},((_currencies$Field$CUR=currencies[Field.CURRENCY_A])===null||_currencies$Field$CUR===void 0?void 0:_currencies$Field$CUR.symbol)+'/'+((_currencies$Field$CUR2=currencies[Field.CURRENCY_B])===null||_currencies$Field$CUR2===void 0?void 0:_currencies$Field$CUR2.symbol)),/*#__PURE__*/React.createElement(DoubleCurrencyLogo,{currency0:currencies[Field.CURRENCY_A],currency1:currencies[Field.CURRENCY_B],size:30})))):/*#__PURE__*/React.createElement(AutoColumn,{gap:\"20px\"},/*#__PURE__*/React.createElement(RowFlat,{style:{marginTop:'20px'}},/*#__PURE__*/React.createElement(Text,{fontSize:\"48px\",fontWeight:500,lineHeight:\"42px\",marginRight:10},liquidityMinted===null||liquidityMinted===void 0?void 0:liquidityMinted.toSignificant(6)),/*#__PURE__*/React.createElement(DoubleCurrencyLogo,{currency0:currencies[Field.CURRENCY_A],currency1:currencies[Field.CURRENCY_B],size:30})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Text,{fontSize:\"24px\"},((_currencies$Field$CUR3=currencies[Field.CURRENCY_A])===null||_currencies$Field$CUR3===void 0?void 0:_currencies$Field$CUR3.symbol)+'/'+((_currencies$Field$CUR4=currencies[Field.CURRENCY_B])===null||_currencies$Field$CUR4===void 0?void 0:_currencies$Field$CUR4.symbol)+' Pool Tokens')),/*#__PURE__*/React.createElement(TYPE.italic,{fontSize:12,textAlign:\"left\",padding:'8px 0 0 0 '},\"Output is estimated. If the price changes by more than \".concat(allowedSlippage/100,\"% your transaction will revert.\")));};var modalBottom=function modalBottom(){return/*#__PURE__*/React.createElement(ConfirmAddModalBottom,{price:price,currencies:currencies,parsedAmounts:parsedAmounts,noLiquidity:noLiquidity,onAdd:onAdd,poolTokenPercentage:poolTokenPercentage});};var pendingText=\"Supplying \".concat((_parsedAmounts$Field$=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$===void 0?void 0:_parsedAmounts$Field$.toSignificant(6),\" \").concat((_currencies$Field$CUR5=currencies[Field.CURRENCY_A])===null||_currencies$Field$CUR5===void 0?void 0:_currencies$Field$CUR5.symbol,\" and \").concat((_parsedAmounts$Field$2=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$2===void 0?void 0:_parsedAmounts$Field$2.toSignificant(6),\" \").concat((_currencies$Field$CUR6=currencies[Field.CURRENCY_B])===null||_currencies$Field$CUR6===void 0?void 0:_currencies$Field$CUR6.symbol);var handleCurrencyASelect=useCallback(function(currencyA){var newCurrencyIdA=currencyId(currencyA);if(newCurrencyIdA===currencyIdB){history.push(\"/add/\".concat(currencyIdB,\"/\").concat(currencyIdA));}else{history.push(\"/add/\".concat(newCurrencyIdA,\"/\").concat(currencyIdB));}},[currencyIdB,history,currencyIdA]);var handleCurrencyBSelect=useCallback(function(currencyB){var newCurrencyIdB=currencyId(currencyB);if(currencyIdA===newCurrencyIdB){if(currencyIdB){history.push(\"/add/\".concat(currencyIdB,\"/\").concat(newCurrencyIdB));}else{history.push(\"/add/\".concat(newCurrencyIdB));}}else{history.push(\"/add/\".concat(currencyIdA?currencyIdA:'ETH',\"/\").concat(newCurrencyIdB));}},[currencyIdA,history,currencyIdB]);var handleDismissConfirmation=useCallback(function(){setShowConfirm(false);// if there was a tx hash, we want to clear the input\nif(txHash){onFieldAInput('');}setTxHash('');},[onFieldAInput,txHash]);var isCreate=history.location.pathname.includes('/create');var addIsUnsupported=useIsTransactionUnsupported(currencies===null||currencies===void 0?void 0:currencies.CURRENCY_A,currencies===null||currencies===void 0?void 0:currencies.CURRENCY_B);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AppBody,null,/*#__PURE__*/React.createElement(AddRemoveTabs,{creating:isCreate,adding:true}),/*#__PURE__*/React.createElement(Wrapper,null,/*#__PURE__*/React.createElement(TransactionConfirmationModal,{isOpen:showConfirm,onDismiss:handleDismissConfirmation,attemptingTxn:attemptingTxn,hash:txHash,content:function content(){return/*#__PURE__*/React.createElement(ConfirmationModalContent,{title:noLiquidity?'You are creating a pool':'You will receive',onDismiss:handleDismissConfirmation,topContent:modalHeader,bottomContent:modalBottom});},pendingText:pendingText,currencyToAdd:pair===null||pair===void 0?void 0:pair.liquidityToken}),/*#__PURE__*/React.createElement(AutoColumn,{gap:\"20px\"},noLiquidity||(isCreate?/*#__PURE__*/React.createElement(ColumnCenter,null,/*#__PURE__*/React.createElement(BlueCard,null,/*#__PURE__*/React.createElement(AutoColumn,{gap:\"10px\"},/*#__PURE__*/React.createElement(TYPE.link,{fontWeight:600,color:'primaryText1'},\"You are the first liquidity provider.\"),/*#__PURE__*/React.createElement(TYPE.link,{fontWeight:400,color:'primaryText1'},\"The ratio of tokens you add will set the price of this pool.\"),/*#__PURE__*/React.createElement(TYPE.link,{fontWeight:400,color:'primaryText1'},\"Once you are happy with the rate click supply to review.\")))):/*#__PURE__*/React.createElement(ColumnCenter,null,/*#__PURE__*/React.createElement(BlueCard,null,/*#__PURE__*/React.createElement(AutoColumn,{gap:\"10px\"},/*#__PURE__*/React.createElement(TYPE.link,{fontWeight:400,color:'primaryText1'},/*#__PURE__*/React.createElement(\"b\",null,\"Tip:\"),\" When you add liquidity, you will receive pool tokens representing your position. These tokens automatically earn fees proportional to your share of the pool, and can be redeemed at any time.\"))))),/*#__PURE__*/React.createElement(CurrencyInputPanel,{value:formattedAmounts[Field.CURRENCY_A],onUserInput:onFieldAInput,onMax:function onMax(){var _maxAmounts$Field$CUR,_maxAmounts$Field$CUR2;onFieldAInput((_maxAmounts$Field$CUR=(_maxAmounts$Field$CUR2=maxAmounts[Field.CURRENCY_A])===null||_maxAmounts$Field$CUR2===void 0?void 0:_maxAmounts$Field$CUR2.toExact())!==null&&_maxAmounts$Field$CUR!==void 0?_maxAmounts$Field$CUR:'');},onCurrencySelect:handleCurrencyASelect,showMaxButton:!atMaxAmounts[Field.CURRENCY_A],currency:currencies[Field.CURRENCY_A],id:\"add-liquidity-input-tokena\",showCommonBases:true}),/*#__PURE__*/React.createElement(ColumnCenter,null,/*#__PURE__*/React.createElement(Plus,{size:\"16\",color:theme.text2})),/*#__PURE__*/React.createElement(CurrencyInputPanel,{value:formattedAmounts[Field.CURRENCY_B],onUserInput:onFieldBInput,onCurrencySelect:handleCurrencyBSelect,onMax:function onMax(){var _maxAmounts$Field$CUR3,_maxAmounts$Field$CUR4;onFieldBInput((_maxAmounts$Field$CUR3=(_maxAmounts$Field$CUR4=maxAmounts[Field.CURRENCY_B])===null||_maxAmounts$Field$CUR4===void 0?void 0:_maxAmounts$Field$CUR4.toExact())!==null&&_maxAmounts$Field$CUR3!==void 0?_maxAmounts$Field$CUR3:'');},showMaxButton:!atMaxAmounts[Field.CURRENCY_B],currency:currencies[Field.CURRENCY_B],id:\"add-liquidity-input-tokenb\",showCommonBases:true}),currencies[Field.CURRENCY_A]&&currencies[Field.CURRENCY_B]&&pairState!==PairState.INVALID&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LightCard,{padding:\"0px\",borderRadius:'20px'},/*#__PURE__*/React.createElement(RowBetween,{padding:\"1rem\"},/*#__PURE__*/React.createElement(TYPE.subHeader,{fontWeight:500,fontSize:14},noLiquidity?'Initial prices':'Prices',\" and pool share\")),' ',/*#__PURE__*/React.createElement(LightCard,{padding:\"1rem\",borderRadius:'20px'},/*#__PURE__*/React.createElement(PoolPriceBar,{currencies:currencies,poolTokenPercentage:poolTokenPercentage,noLiquidity:noLiquidity,price:price})))),addIsUnsupported?/*#__PURE__*/React.createElement(ButtonPrimary,{disabled:true},/*#__PURE__*/React.createElement(TYPE.main,{mb:\"4px\"},\"Unsupported Asset\")):!account?/*#__PURE__*/React.createElement(ButtonLight,{onClick:toggleWalletModal},\"Connect Wallet\"):/*#__PURE__*/React.createElement(AutoColumn,{gap:'md'},(approvalA===ApprovalState.NOT_APPROVED||approvalA===ApprovalState.PENDING||approvalB===ApprovalState.NOT_APPROVED||approvalB===ApprovalState.PENDING)&&isValid&&/*#__PURE__*/React.createElement(RowBetween,null,approvalA!==ApprovalState.APPROVED&&/*#__PURE__*/React.createElement(ButtonPrimary,{onClick:approveACallback,disabled:approvalA===ApprovalState.PENDING,width:approvalB!==ApprovalState.APPROVED?'48%':'100%'},approvalA===ApprovalState.PENDING?/*#__PURE__*/React.createElement(Dots,null,\"Approving \",(_currencies$Field$CUR7=currencies[Field.CURRENCY_A])===null||_currencies$Field$CUR7===void 0?void 0:_currencies$Field$CUR7.symbol):'Approve '+((_currencies$Field$CUR8=currencies[Field.CURRENCY_A])===null||_currencies$Field$CUR8===void 0?void 0:_currencies$Field$CUR8.symbol)),approvalB!==ApprovalState.APPROVED&&/*#__PURE__*/React.createElement(ButtonPrimary,{onClick:approveBCallback,disabled:approvalB===ApprovalState.PENDING,width:approvalA!==ApprovalState.APPROVED?'48%':'100%'},approvalB===ApprovalState.PENDING?/*#__PURE__*/React.createElement(Dots,null,\"Approving \",(_currencies$Field$CUR9=currencies[Field.CURRENCY_B])===null||_currencies$Field$CUR9===void 0?void 0:_currencies$Field$CUR9.symbol):'Approve '+((_currencies$Field$CUR10=currencies[Field.CURRENCY_B])===null||_currencies$Field$CUR10===void 0?void 0:_currencies$Field$CUR10.symbol))),/*#__PURE__*/React.createElement(ButtonError,{onClick:function onClick(){expertMode?onAdd():setShowConfirm(true);},disabled:!isValid||approvalA!==ApprovalState.APPROVED||approvalB!==ApprovalState.APPROVED,error:!isValid&&!!parsedAmounts[Field.CURRENCY_A]&&!!parsedAmounts[Field.CURRENCY_B]},/*#__PURE__*/React.createElement(Text,{fontSize:20,fontWeight:500},error!==null&&error!==void 0?error:'Supply')))))),!addIsUnsupported?pair&&!noLiquidity&&pairState!==PairState.INVALID?/*#__PURE__*/React.createElement(AutoColumn,{style:{minWidth:'20rem',width:'100%',maxWidth:'400px',marginTop:'1rem'}},/*#__PURE__*/React.createElement(MinimalPositionCard,{showUnwrapped:oneCurrencyIsWETH,pair:pair})):null:/*#__PURE__*/React.createElement(UnsupportedCurrencyFooter,{show:addIsUnsupported,currencies:[currencies.CURRENCY_A,currencies.CURRENCY_B]}));}","map":{"version":3,"sources":["C:/Users/Darrius/Documents/GitHub/swap-interface/src/pages/AddLiquidity/index.tsx"],"names":["BigNumber","currencyEquals","ETHER","WETH","React","useCallback","useContext","useState","Plus","ReactGA","Text","ThemeContext","ButtonError","ButtonLight","ButtonPrimary","BlueCard","LightCard","AutoColumn","ColumnCenter","TransactionConfirmationModal","ConfirmationModalContent","CurrencyInputPanel","DoubleCurrencyLogo","AddRemoveTabs","MinimalPositionCard","Row","RowBetween","RowFlat","ROUTER_ADDRESS","PairState","useActiveWeb3React","useCurrency","ApprovalState","useApproveCallback","useTransactionDeadline","useWalletModalToggle","Field","useDerivedMintInfo","useMintActionHandlers","useMintState","useTransactionAdder","useIsExpertMode","useUserSlippageTolerance","TYPE","calculateGasMargin","calculateSlippageAmount","getRouterContract","maxAmountSpend","wrappedCurrency","AppBody","Dots","Wrapper","ConfirmAddModalBottom","currencyId","PoolPriceBar","useIsTransactionUnsupported","UnsupportedCurrencyFooter","AddLiquidity","match","params","currencyIdA","currencyIdB","history","account","chainId","library","theme","currencyA","currencyB","oneCurrencyIsWETH","Boolean","toggleWalletModal","expertMode","independentField","typedValue","otherTypedValue","undefined","dependentField","currencies","pair","pairState","currencyBalances","parsedAmounts","price","noLiquidity","liquidityMinted","poolTokenPercentage","error","onFieldAInput","onFieldBInput","isValid","showConfirm","setShowConfirm","attemptingTxn","setAttemptingTxn","deadline","allowedSlippage","txHash","setTxHash","formattedAmounts","toSignificant","maxAmounts","CURRENCY_A","CURRENCY_B","reduce","accumulator","field","atMaxAmounts","equalTo","approvalA","approveACallback","approvalB","approveBCallback","addTransaction","onAdd","router","parsedAmountA","parsedAmountB","amountsMin","tokenBIsETH","estimate","estimateGas","addLiquidityETH","method","args","address","raw","toString","toHexString","value","from","addLiquidity","then","estimatedGasLimit","gasLimit","response","summary","symbol","hash","event","category","action","label","join","catch","code","console","modalHeader","marginTop","modalBottom","pendingText","handleCurrencyASelect","newCurrencyIdA","push","handleCurrencyBSelect","newCurrencyIdB","handleDismissConfirmation","isCreate","location","pathname","includes","addIsUnsupported","liquidityToken","toExact","text2","INVALID","NOT_APPROVED","PENDING","APPROVED","minWidth","width","maxWidth"],"mappings":"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","sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\r\nimport { TransactionResponse } from '@ethersproject/providers'\r\nimport { Currency, currencyEquals, ETHER, TokenAmount, WETH } from '@uniswap/sdk'\r\nimport React, { useCallback, useContext, useState } from 'react'\r\nimport { Plus } from 'react-feather'\r\nimport ReactGA from 'react-ga'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { Text } from 'rebass'\r\nimport { ThemeContext } from 'styled-components'\r\nimport { ButtonError, ButtonLight, ButtonPrimary } from '../../components/Button'\r\nimport { BlueCard, LightCard } from '../../components/Card'\r\nimport { AutoColumn, ColumnCenter } from '../../components/Column'\r\nimport TransactionConfirmationModal, { ConfirmationModalContent } from '../../components/TransactionConfirmationModal'\r\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\r\nimport DoubleCurrencyLogo from '../../components/DoubleLogo'\r\nimport { AddRemoveTabs } from '../../components/NavigationTabs'\r\nimport { MinimalPositionCard } from '../../components/PositionCard'\r\nimport Row, { RowBetween, RowFlat } from '../../components/Row'\r\n\r\nimport { ROUTER_ADDRESS } from '../../constants'\r\nimport { PairState } from '../../data/Reserves'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { useCurrency } from '../../hooks/Tokens'\r\nimport { ApprovalState, useApproveCallback } from '../../hooks/useApproveCallback'\r\nimport useTransactionDeadline from '../../hooks/useTransactionDeadline'\r\nimport { useWalletModalToggle } from '../../state/application/hooks'\r\nimport { Field } from '../../state/mint/actions'\r\nimport { useDerivedMintInfo, useMintActionHandlers, useMintState } from '../../state/mint/hooks'\r\n\r\nimport { useTransactionAdder } from '../../state/transactions/hooks'\r\nimport { useIsExpertMode, useUserSlippageTolerance } from '../../state/user/hooks'\r\nimport { TYPE } from '../../theme'\r\nimport { calculateGasMargin, calculateSlippageAmount, getRouterContract } from '../../utils'\r\nimport { maxAmountSpend } from '../../utils/maxAmountSpend'\r\nimport { wrappedCurrency } from '../../utils/wrappedCurrency'\r\nimport AppBody from '../AppBody'\r\nimport { Dots, Wrapper } from '../Pool/styleds'\r\nimport { ConfirmAddModalBottom } from './ConfirmAddModalBottom'\r\nimport { currencyId } from '../../utils/currencyId'\r\nimport { PoolPriceBar } from './PoolPriceBar'\r\nimport { useIsTransactionUnsupported } from 'hooks/Trades'\r\nimport UnsupportedCurrencyFooter from 'components/swap/UnsupportedCurrencyFooter'\r\n\r\nexport default function AddLiquidity({\r\n  match: {\r\n    params: { currencyIdA, currencyIdB }\r\n  },\r\n  history\r\n}: RouteComponentProps<{ currencyIdA?: string; currencyIdB?: string }>) {\r\n  const { account, chainId, library } = useActiveWeb3React()\r\n  const theme = useContext(ThemeContext)\r\n\r\n  const currencyA = useCurrency(currencyIdA)\r\n  const currencyB = useCurrency(currencyIdB)\r\n\r\n  const oneCurrencyIsWETH = Boolean(\r\n    chainId &&\r\n      ((currencyA && currencyEquals(currencyA, WETH[chainId])) ||\r\n        (currencyB && currencyEquals(currencyB, WETH[chainId])))\r\n  )\r\n\r\n  const toggleWalletModal = useWalletModalToggle() // toggle wallet when disconnected\r\n\r\n  const expertMode = useIsExpertMode()\r\n\r\n  // mint state\r\n  const { independentField, typedValue, otherTypedValue } = useMintState()\r\n  const {\r\n    dependentField,\r\n    currencies,\r\n    pair,\r\n    pairState,\r\n    currencyBalances,\r\n    parsedAmounts,\r\n    price,\r\n    noLiquidity,\r\n    liquidityMinted,\r\n    poolTokenPercentage,\r\n    error\r\n  } = useDerivedMintInfo(currencyA ?? undefined, currencyB ?? undefined)\r\n\r\n  const { onFieldAInput, onFieldBInput } = useMintActionHandlers(noLiquidity)\r\n\r\n  const isValid = !error\r\n\r\n  // modal and loading\r\n  const [showConfirm, setShowConfirm] = useState<boolean>(false)\r\n  const [attemptingTxn, setAttemptingTxn] = useState<boolean>(false) // clicked confirm\r\n\r\n  // txn values\r\n  const deadline = useTransactionDeadline() // custom from users settings\r\n  const [allowedSlippage] = useUserSlippageTolerance() // custom from users\r\n  const [txHash, setTxHash] = useState<string>('')\r\n\r\n  // get formatted amounts\r\n  const formattedAmounts = {\r\n    [independentField]: typedValue,\r\n    [dependentField]: noLiquidity ? otherTypedValue : parsedAmounts[dependentField]?.toSignificant(6) ?? ''\r\n  }\r\n\r\n  // get the max amounts user can add\r\n  const maxAmounts: { [field in Field]?: TokenAmount } = [Field.CURRENCY_A, Field.CURRENCY_B].reduce(\r\n    (accumulator, field) => {\r\n      return {\r\n        ...accumulator,\r\n        [field]: maxAmountSpend(currencyBalances[field])\r\n      }\r\n    },\r\n    {}\r\n  )\r\n\r\n  const atMaxAmounts: { [field in Field]?: TokenAmount } = [Field.CURRENCY_A, Field.CURRENCY_B].reduce(\r\n    (accumulator, field) => {\r\n      return {\r\n        ...accumulator,\r\n        [field]: maxAmounts[field]?.equalTo(parsedAmounts[field] ?? '0')\r\n      }\r\n    },\r\n    {}\r\n  )\r\n\r\n  // check whether the user has approved the router on the tokens\r\n  const [approvalA, approveACallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_A], ROUTER_ADDRESS)\r\n  const [approvalB, approveBCallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_B], ROUTER_ADDRESS)\r\n\r\n  const addTransaction = useTransactionAdder()\r\n\r\n  async function onAdd() {\r\n    if (!chainId || !library || !account) return\r\n    const router = getRouterContract(chainId, library, account)\r\n\r\n    const { [Field.CURRENCY_A]: parsedAmountA, [Field.CURRENCY_B]: parsedAmountB } = parsedAmounts\r\n    if (!parsedAmountA || !parsedAmountB || !currencyA || !currencyB || !deadline) {\r\n      return\r\n    }\r\n\r\n    const amountsMin = {\r\n      [Field.CURRENCY_A]: calculateSlippageAmount(parsedAmountA, noLiquidity ? 0 : allowedSlippage)[0],\r\n      [Field.CURRENCY_B]: calculateSlippageAmount(parsedAmountB, noLiquidity ? 0 : allowedSlippage)[0]\r\n    }\r\n\r\n    let estimate,\r\n      method: (...args: any) => Promise<TransactionResponse>,\r\n      args: Array<string | string[] | number>,\r\n      value: BigNumber | null\r\n    if (currencyA === ETHER || currencyB === ETHER) {\r\n      const tokenBIsETH = currencyB === ETHER\r\n      estimate = router.estimateGas.addLiquidityETH\r\n      method = router.addLiquidityETH\r\n      args = [\r\n        wrappedCurrency(tokenBIsETH ? currencyA : currencyB, chainId)?.address ?? '', // token\r\n        (tokenBIsETH ? parsedAmountA : parsedAmountB).raw.toString(), // token desired\r\n        amountsMin[tokenBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(), // token min\r\n        amountsMin[tokenBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(), // eth min\r\n        account,\r\n        deadline.toHexString()\r\n      ]\r\n      value = BigNumber.from((tokenBIsETH ? parsedAmountB : parsedAmountA).raw.toString())\r\n    } else {\r\n      estimate = router.estimateGas.addLiquidity\r\n      method = router.addLiquidity\r\n      args = [\r\n        wrappedCurrency(currencyA, chainId)?.address ?? '',\r\n        wrappedCurrency(currencyB, chainId)?.address ?? '',\r\n        parsedAmountA.raw.toString(),\r\n        parsedAmountB.raw.toString(),\r\n        amountsMin[Field.CURRENCY_A].toString(),\r\n        amountsMin[Field.CURRENCY_B].toString(),\r\n        account,\r\n        deadline.toHexString()\r\n      ]\r\n      value = null\r\n    }\r\n\r\n    setAttemptingTxn(true)\r\n    await estimate(...args, value ? { value } : {})\r\n      .then(estimatedGasLimit =>\r\n        method(...args, {\r\n          ...(value ? { value } : {}),\r\n          gasLimit: calculateGasMargin(estimatedGasLimit)\r\n        }).then(response => {\r\n          setAttemptingTxn(false)\r\n\r\n          addTransaction(response, {\r\n            summary:\r\n              'Add ' +\r\n              parsedAmounts[Field.CURRENCY_A]?.toSignificant(3) +\r\n              ' ' +\r\n              currencies[Field.CURRENCY_A]?.symbol +\r\n              ' and ' +\r\n              parsedAmounts[Field.CURRENCY_B]?.toSignificant(3) +\r\n              ' ' +\r\n              currencies[Field.CURRENCY_B]?.symbol\r\n          })\r\n\r\n          setTxHash(response.hash)\r\n\r\n          ReactGA.event({\r\n            category: 'Liquidity',\r\n            action: 'Add',\r\n            label: [currencies[Field.CURRENCY_A]?.symbol, currencies[Field.CURRENCY_B]?.symbol].join('/')\r\n          })\r\n        })\r\n      )\r\n      .catch(error => {\r\n        setAttemptingTxn(false)\r\n        // we only care if the error is something _other_ than the user rejected the tx\r\n        if (error?.code !== 4001) {\r\n          console.error(error)\r\n        }\r\n      })\r\n  }\r\n\r\n  const modalHeader = () => {\r\n    return noLiquidity ? (\r\n      <AutoColumn gap=\"20px\">\r\n        <LightCard mt=\"20px\" borderRadius=\"20px\">\r\n          <RowFlat>\r\n            <Text fontSize=\"48px\" fontWeight={500} lineHeight=\"42px\" marginRight={10}>\r\n              {currencies[Field.CURRENCY_A]?.symbol + '/' + currencies[Field.CURRENCY_B]?.symbol}\r\n            </Text>\r\n            <DoubleCurrencyLogo\r\n              currency0={currencies[Field.CURRENCY_A]}\r\n              currency1={currencies[Field.CURRENCY_B]}\r\n              size={30}\r\n            />\r\n          </RowFlat>\r\n        </LightCard>\r\n      </AutoColumn>\r\n    ) : (\r\n      <AutoColumn gap=\"20px\">\r\n        <RowFlat style={{ marginTop: '20px' }}>\r\n          <Text fontSize=\"48px\" fontWeight={500} lineHeight=\"42px\" marginRight={10}>\r\n            {liquidityMinted?.toSignificant(6)}\r\n          </Text>\r\n          <DoubleCurrencyLogo\r\n            currency0={currencies[Field.CURRENCY_A]}\r\n            currency1={currencies[Field.CURRENCY_B]}\r\n            size={30}\r\n          />\r\n        </RowFlat>\r\n        <Row>\r\n          <Text fontSize=\"24px\">\r\n            {currencies[Field.CURRENCY_A]?.symbol + '/' + currencies[Field.CURRENCY_B]?.symbol + ' Pool Tokens'}\r\n          </Text>\r\n        </Row>\r\n        <TYPE.italic fontSize={12} textAlign=\"left\" padding={'8px 0 0 0 '}>\r\n          {`Output is estimated. If the price changes by more than ${allowedSlippage /\r\n            100}% your transaction will revert.`}\r\n        </TYPE.italic>\r\n      </AutoColumn>\r\n    )\r\n  }\r\n\r\n  const modalBottom = () => {\r\n    return (\r\n      <ConfirmAddModalBottom\r\n        price={price}\r\n        currencies={currencies}\r\n        parsedAmounts={parsedAmounts}\r\n        noLiquidity={noLiquidity}\r\n        onAdd={onAdd}\r\n        poolTokenPercentage={poolTokenPercentage}\r\n      />\r\n    )\r\n  }\r\n\r\n  const pendingText = `Supplying ${parsedAmounts[Field.CURRENCY_A]?.toSignificant(6)} ${\r\n    currencies[Field.CURRENCY_A]?.symbol\r\n  } and ${parsedAmounts[Field.CURRENCY_B]?.toSignificant(6)} ${currencies[Field.CURRENCY_B]?.symbol}`\r\n\r\n  const handleCurrencyASelect = useCallback(\r\n    (currencyA: Currency) => {\r\n      const newCurrencyIdA = currencyId(currencyA)\r\n      if (newCurrencyIdA === currencyIdB) {\r\n        history.push(`/add/${currencyIdB}/${currencyIdA}`)\r\n      } else {\r\n        history.push(`/add/${newCurrencyIdA}/${currencyIdB}`)\r\n      }\r\n    },\r\n    [currencyIdB, history, currencyIdA]\r\n  )\r\n  const handleCurrencyBSelect = useCallback(\r\n    (currencyB: Currency) => {\r\n      const newCurrencyIdB = currencyId(currencyB)\r\n      if (currencyIdA === newCurrencyIdB) {\r\n        if (currencyIdB) {\r\n          history.push(`/add/${currencyIdB}/${newCurrencyIdB}`)\r\n        } else {\r\n          history.push(`/add/${newCurrencyIdB}`)\r\n        }\r\n      } else {\r\n        history.push(`/add/${currencyIdA ? currencyIdA : 'ETH'}/${newCurrencyIdB}`)\r\n      }\r\n    },\r\n    [currencyIdA, history, currencyIdB]\r\n  )\r\n\r\n  const handleDismissConfirmation = useCallback(() => {\r\n    setShowConfirm(false)\r\n    // if there was a tx hash, we want to clear the input\r\n    if (txHash) {\r\n      onFieldAInput('')\r\n    }\r\n    setTxHash('')\r\n  }, [onFieldAInput, txHash])\r\n\r\n  const isCreate = history.location.pathname.includes('/create')\r\n\r\n  const addIsUnsupported = useIsTransactionUnsupported(currencies?.CURRENCY_A, currencies?.CURRENCY_B)\r\n\r\n  return (\r\n    <>\r\n      <AppBody>\r\n        <AddRemoveTabs creating={isCreate} adding={true} />\r\n        <Wrapper>\r\n          <TransactionConfirmationModal\r\n            isOpen={showConfirm}\r\n            onDismiss={handleDismissConfirmation}\r\n            attemptingTxn={attemptingTxn}\r\n            hash={txHash}\r\n            content={() => (\r\n              <ConfirmationModalContent\r\n                title={noLiquidity ? 'You are creating a pool' : 'You will receive'}\r\n                onDismiss={handleDismissConfirmation}\r\n                topContent={modalHeader}\r\n                bottomContent={modalBottom}\r\n              />\r\n            )}\r\n            pendingText={pendingText}\r\n            currencyToAdd={pair?.liquidityToken}\r\n          />\r\n          <AutoColumn gap=\"20px\">\r\n            {noLiquidity ||\r\n              (isCreate ? (\r\n                <ColumnCenter>\r\n                  <BlueCard>\r\n                    <AutoColumn gap=\"10px\">\r\n                      <TYPE.link fontWeight={600} color={'primaryText1'}>\r\n                        You are the first liquidity provider.\r\n                      </TYPE.link>\r\n                      <TYPE.link fontWeight={400} color={'primaryText1'}>\r\n                        The ratio of tokens you add will set the price of this pool.\r\n                      </TYPE.link>\r\n                      <TYPE.link fontWeight={400} color={'primaryText1'}>\r\n                        Once you are happy with the rate click supply to review.\r\n                      </TYPE.link>\r\n                    </AutoColumn>\r\n                  </BlueCard>\r\n                </ColumnCenter>\r\n              ) : (\r\n                <ColumnCenter>\r\n                  <BlueCard>\r\n                    <AutoColumn gap=\"10px\">\r\n                      <TYPE.link fontWeight={400} color={'primaryText1'}>\r\n                        <b>Tip:</b> When you add liquidity, you will receive pool tokens representing your position.\r\n                        These tokens automatically earn fees proportional to your share of the pool, and can be redeemed\r\n                        at any time.\r\n                      </TYPE.link>\r\n                    </AutoColumn>\r\n                  </BlueCard>\r\n                </ColumnCenter>\r\n              ))}\r\n            <CurrencyInputPanel\r\n              value={formattedAmounts[Field.CURRENCY_A]}\r\n              onUserInput={onFieldAInput}\r\n              onMax={() => {\r\n                onFieldAInput(maxAmounts[Field.CURRENCY_A]?.toExact() ?? '')\r\n              }}\r\n              onCurrencySelect={handleCurrencyASelect}\r\n              showMaxButton={!atMaxAmounts[Field.CURRENCY_A]}\r\n              currency={currencies[Field.CURRENCY_A]}\r\n              id=\"add-liquidity-input-tokena\"\r\n              showCommonBases\r\n            />\r\n            <ColumnCenter>\r\n              <Plus size=\"16\" color={theme.text2} />\r\n            </ColumnCenter>\r\n            <CurrencyInputPanel\r\n              value={formattedAmounts[Field.CURRENCY_B]}\r\n              onUserInput={onFieldBInput}\r\n              onCurrencySelect={handleCurrencyBSelect}\r\n              onMax={() => {\r\n                onFieldBInput(maxAmounts[Field.CURRENCY_B]?.toExact() ?? '')\r\n              }}\r\n              showMaxButton={!atMaxAmounts[Field.CURRENCY_B]}\r\n              currency={currencies[Field.CURRENCY_B]}\r\n              id=\"add-liquidity-input-tokenb\"\r\n              showCommonBases\r\n            />\r\n            {currencies[Field.CURRENCY_A] && currencies[Field.CURRENCY_B] && pairState !== PairState.INVALID && (\r\n              <>\r\n                <LightCard padding=\"0px\" borderRadius={'20px'}>\r\n                  <RowBetween padding=\"1rem\">\r\n                    <TYPE.subHeader fontWeight={500} fontSize={14}>\r\n                      {noLiquidity ? 'Initial prices' : 'Prices'} and pool share\r\n                    </TYPE.subHeader>\r\n                  </RowBetween>{' '}\r\n                  <LightCard padding=\"1rem\" borderRadius={'20px'}>\r\n                    <PoolPriceBar\r\n                      currencies={currencies}\r\n                      poolTokenPercentage={poolTokenPercentage}\r\n                      noLiquidity={noLiquidity}\r\n                      price={price}\r\n                    />\r\n                  </LightCard>\r\n                </LightCard>\r\n              </>\r\n            )}\r\n\r\n            {addIsUnsupported ? (\r\n              <ButtonPrimary disabled={true}>\r\n                <TYPE.main mb=\"4px\">Unsupported Asset</TYPE.main>\r\n              </ButtonPrimary>\r\n            ) : !account ? (\r\n              <ButtonLight onClick={toggleWalletModal}>Connect Wallet</ButtonLight>\r\n            ) : (\r\n              <AutoColumn gap={'md'}>\r\n                {(approvalA === ApprovalState.NOT_APPROVED ||\r\n                  approvalA === ApprovalState.PENDING ||\r\n                  approvalB === ApprovalState.NOT_APPROVED ||\r\n                  approvalB === ApprovalState.PENDING) &&\r\n                  isValid && (\r\n                    <RowBetween>\r\n                      {approvalA !== ApprovalState.APPROVED && (\r\n                        <ButtonPrimary\r\n                          onClick={approveACallback}\r\n                          disabled={approvalA === ApprovalState.PENDING}\r\n                          width={approvalB !== ApprovalState.APPROVED ? '48%' : '100%'}\r\n                        >\r\n                          {approvalA === ApprovalState.PENDING ? (\r\n                            <Dots>Approving {currencies[Field.CURRENCY_A]?.symbol}</Dots>\r\n                          ) : (\r\n                            'Approve ' + currencies[Field.CURRENCY_A]?.symbol\r\n                          )}\r\n                        </ButtonPrimary>\r\n                      )}\r\n                      {approvalB !== ApprovalState.APPROVED && (\r\n                        <ButtonPrimary\r\n                          onClick={approveBCallback}\r\n                          disabled={approvalB === ApprovalState.PENDING}\r\n                          width={approvalA !== ApprovalState.APPROVED ? '48%' : '100%'}\r\n                        >\r\n                          {approvalB === ApprovalState.PENDING ? (\r\n                            <Dots>Approving {currencies[Field.CURRENCY_B]?.symbol}</Dots>\r\n                          ) : (\r\n                            'Approve ' + currencies[Field.CURRENCY_B]?.symbol\r\n                          )}\r\n                        </ButtonPrimary>\r\n                      )}\r\n                    </RowBetween>\r\n                  )}\r\n                <ButtonError\r\n                  onClick={() => {\r\n                    expertMode ? onAdd() : setShowConfirm(true)\r\n                  }}\r\n                  disabled={!isValid || approvalA !== ApprovalState.APPROVED || approvalB !== ApprovalState.APPROVED}\r\n                  error={!isValid && !!parsedAmounts[Field.CURRENCY_A] && !!parsedAmounts[Field.CURRENCY_B]}\r\n                >\r\n                  <Text fontSize={20} fontWeight={500}>\r\n                    {error ?? 'Supply'}\r\n                  </Text>\r\n                </ButtonError>\r\n              </AutoColumn>\r\n            )}\r\n          </AutoColumn>\r\n        </Wrapper>\r\n      </AppBody>\r\n      {!addIsUnsupported ? (\r\n        pair && !noLiquidity && pairState !== PairState.INVALID ? (\r\n          <AutoColumn style={{ minWidth: '20rem', width: '100%', maxWidth: '400px', marginTop: '1rem' }}>\r\n            <MinimalPositionCard showUnwrapped={oneCurrencyIsWETH} pair={pair} />\r\n          </AutoColumn>\r\n        ) : null\r\n      ) : (\r\n        <UnsupportedCurrencyFooter\r\n          show={addIsUnsupported}\r\n          currencies={[currencies.CURRENCY_A, currencies.CURRENCY_B]}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}