{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  :hover {\\n    cursor: pointer;\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  :hover {\\n    cursor: pointer;\\n  }\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 24px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState}from'react';import Modal from'../Modal';import{AutoColumn}from'../Column';import styled from'styled-components';import{RowBetween}from'../Row';import{TYPE}from'../../theme';import{X}from'react-feather';import{ButtonPrimary}from'../Button';import{useActiveWeb3React}from'../../hooks';import AddressInputPanel from'../AddressInputPanel';import{isAddress}from'ethers/lib/utils';import useENS from'../../hooks/useENS';import{useDelegateCallback}from'../../state/governance/hooks';import{useTokenBalance}from'../../state/wallet/hooks';import{UNI}from'../../constants';import{LoadingView,SubmittedView}from'../ModalViews';var ContentWrapper=styled(AutoColumn)(_templateObject());var StyledClosed=styled(X)(_templateObject2());var TextButton=styled.div(_templateObject3());export default function DelegateModal(_ref){var isOpen=_ref.isOpen,onDismiss=_ref.onDismiss,title=_ref.title;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId;// state for delegate input\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),usingDelegate=_useState2[0],setUsingDelegate=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),typed=_useState4[0],setTyped=_useState4[1];function handleRecipientType(val){setTyped(val);}// monitor for self delegation or input for third part delegate\n// default is self delegation\nvar activeDelegate=usingDelegate?typed:account;var _useENS=useENS(activeDelegate),parsedAddress=_useENS.address;// get the number of votes available to delegate\nvar uniBalance=useTokenBalance(account!==null&&account!==void 0?account:undefined,chainId?UNI[chainId]:undefined);var delegateCallback=useDelegateCallback();// monitor call to help UI loading state\nvar _useState5=useState(),_useState6=_slicedToArray(_useState5,2),hash=_useState6[0],setHash=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),attempting=_useState8[0],setAttempting=_useState8[1];// wrapper to reset state on modal close\nfunction wrappedOndismiss(){setHash(undefined);setAttempting(false);onDismiss();}function onDelegate(){return _onDelegate.apply(this,arguments);}function _onDelegate(){_onDelegate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _delegateCallback;var hash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setAttempting(true);// if callback not returned properly ignore\nif(delegateCallback){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.next=5;return(_delegateCallback=delegateCallback(parsedAddress!==null&&parsedAddress!==void 0?parsedAddress:undefined))===null||_delegateCallback===void 0?void 0:_delegateCallback.catch(function(error){setAttempting(false);console.log(error);});case 5:hash=_context.sent;if(hash){setHash(hash);}case 7:case\"end\":return _context.stop();}}},_callee);}));return _onDelegate.apply(this,arguments);}return/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,onDismiss:wrappedOndismiss,maxHeight:90},!attempting&&!hash&&/*#__PURE__*/React.createElement(ContentWrapper,{gap:\"lg\"},/*#__PURE__*/React.createElement(AutoColumn,{gap:\"lg\",justify:\"center\"},/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(TYPE.mediumHeader,{fontWeight:500},title),/*#__PURE__*/React.createElement(StyledClosed,{stroke:\"black\",onClick:wrappedOndismiss})),/*#__PURE__*/React.createElement(TYPE.body,null,\"Earned UNI tokens represent voting shares in Uniswap governance.\"),/*#__PURE__*/React.createElement(TYPE.body,null,\"You can either vote on each proposal yourself or delegate your votes to a third party.\"),usingDelegate&&/*#__PURE__*/React.createElement(AddressInputPanel,{value:typed,onChange:handleRecipientType}),/*#__PURE__*/React.createElement(ButtonPrimary,{disabled:!isAddress(parsedAddress!==null&&parsedAddress!==void 0?parsedAddress:''),onClick:onDelegate},/*#__PURE__*/React.createElement(TYPE.mediumHeader,{color:\"white\"},usingDelegate?'Delegate Votes':'Self Delegate')),/*#__PURE__*/React.createElement(TextButton,{onClick:function onClick(){return setUsingDelegate(!usingDelegate);}},/*#__PURE__*/React.createElement(TYPE.blue,null,usingDelegate?'Remove':'Add',\" Delegate \",!usingDelegate&&'+')))),attempting&&!hash&&/*#__PURE__*/React.createElement(LoadingView,{onDismiss:wrappedOndismiss},/*#__PURE__*/React.createElement(AutoColumn,{gap:\"12px\",justify:'center'},/*#__PURE__*/React.createElement(TYPE.largeHeader,null,usingDelegate?'Delegating votes':'Unlocking Votes'),/*#__PURE__*/React.createElement(TYPE.main,{fontSize:36},uniBalance===null||uniBalance===void 0?void 0:uniBalance.toSignificant(4)))),hash&&/*#__PURE__*/React.createElement(SubmittedView,{onDismiss:wrappedOndismiss,hash:hash},/*#__PURE__*/React.createElement(AutoColumn,{gap:\"12px\",justify:'center'},/*#__PURE__*/React.createElement(TYPE.largeHeader,null,\"Transaction Submitted\"),/*#__PURE__*/React.createElement(TYPE.main,{fontSize:36},uniBalance===null||uniBalance===void 0?void 0:uniBalance.toSignificant(4)))));}","map":{"version":3,"sources":["C:/Users/Darrius/Documents/GitHub/swap-interface/src/components/vote/DelegateModal.tsx"],"names":["React","useState","Modal","AutoColumn","styled","RowBetween","TYPE","X","ButtonPrimary","useActiveWeb3React","AddressInputPanel","isAddress","useENS","useDelegateCallback","useTokenBalance","UNI","LoadingView","SubmittedView","ContentWrapper","StyledClosed","TextButton","div","DelegateModal","isOpen","onDismiss","title","account","chainId","usingDelegate","setUsingDelegate","typed","setTyped","handleRecipientType","val","activeDelegate","parsedAddress","address","uniBalance","undefined","delegateCallback","hash","setHash","attempting","setAttempting","wrappedOndismiss","onDelegate","catch","error","console","log","toSignificant"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\n\r\nimport Modal from '../Modal'\r\nimport { AutoColumn } from '../Column'\r\nimport styled from 'styled-components'\r\nimport { RowBetween } from '../Row'\r\nimport { TYPE } from '../../theme'\r\nimport { X } from 'react-feather'\r\nimport { ButtonPrimary } from '../Button'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport AddressInputPanel from '../AddressInputPanel'\r\nimport { isAddress } from 'ethers/lib/utils'\r\nimport useENS from '../../hooks/useENS'\r\nimport { useDelegateCallback } from '../../state/governance/hooks'\r\nimport { useTokenBalance } from '../../state/wallet/hooks'\r\nimport { UNI } from '../../constants'\r\nimport { LoadingView, SubmittedView } from '../ModalViews'\r\n\r\nconst ContentWrapper = styled(AutoColumn)`\r\n  width: 100%;\r\n  padding: 24px;\r\n`\r\n\r\nconst StyledClosed = styled(X)`\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nconst TextButton = styled.div`\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\ninterface VoteModalProps {\r\n  isOpen: boolean\r\n  onDismiss: () => void\r\n  title: string\r\n}\r\n\r\nexport default function DelegateModal({ isOpen, onDismiss, title }: VoteModalProps) {\r\n  const { account, chainId } = useActiveWeb3React()\r\n\r\n  // state for delegate input\r\n  const [usingDelegate, setUsingDelegate] = useState(false)\r\n  const [typed, setTyped] = useState('')\r\n  function handleRecipientType(val: string) {\r\n    setTyped(val)\r\n  }\r\n\r\n  // monitor for self delegation or input for third part delegate\r\n  // default is self delegation\r\n  const activeDelegate = usingDelegate ? typed : account\r\n  const { address: parsedAddress } = useENS(activeDelegate)\r\n\r\n  // get the number of votes available to delegate\r\n  const uniBalance = useTokenBalance(account ?? undefined, chainId ? UNI[chainId] : undefined)\r\n\r\n  const delegateCallback = useDelegateCallback()\r\n\r\n  // monitor call to help UI loading state\r\n  const [hash, setHash] = useState<string | undefined>()\r\n  const [attempting, setAttempting] = useState(false)\r\n\r\n  // wrapper to reset state on modal close\r\n  function wrappedOndismiss() {\r\n    setHash(undefined)\r\n    setAttempting(false)\r\n    onDismiss()\r\n  }\r\n\r\n  async function onDelegate() {\r\n    setAttempting(true)\r\n\r\n    // if callback not returned properly ignore\r\n    if (!delegateCallback) return\r\n\r\n    // try delegation and store hash\r\n    const hash = await delegateCallback(parsedAddress ?? undefined)?.catch(error => {\r\n      setAttempting(false)\r\n      console.log(error)\r\n    })\r\n\r\n    if (hash) {\r\n      setHash(hash)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onDismiss={wrappedOndismiss} maxHeight={90}>\r\n      {!attempting && !hash && (\r\n        <ContentWrapper gap=\"lg\">\r\n          <AutoColumn gap=\"lg\" justify=\"center\">\r\n            <RowBetween>\r\n              <TYPE.mediumHeader fontWeight={500}>{title}</TYPE.mediumHeader>\r\n              <StyledClosed stroke=\"black\" onClick={wrappedOndismiss} />\r\n            </RowBetween>\r\n            <TYPE.body>Earned UNI tokens represent voting shares in Uniswap governance.</TYPE.body>\r\n            <TYPE.body>\r\n              You can either vote on each proposal yourself or delegate your votes to a third party.\r\n            </TYPE.body>\r\n            {usingDelegate && <AddressInputPanel value={typed} onChange={handleRecipientType} />}\r\n            <ButtonPrimary disabled={!isAddress(parsedAddress ?? '')} onClick={onDelegate}>\r\n              <TYPE.mediumHeader color=\"white\">{usingDelegate ? 'Delegate Votes' : 'Self Delegate'}</TYPE.mediumHeader>\r\n            </ButtonPrimary>\r\n            <TextButton onClick={() => setUsingDelegate(!usingDelegate)}>\r\n              <TYPE.blue>\r\n                {usingDelegate ? 'Remove' : 'Add'} Delegate {!usingDelegate && '+'}\r\n              </TYPE.blue>\r\n            </TextButton>\r\n          </AutoColumn>\r\n        </ContentWrapper>\r\n      )}\r\n      {attempting && !hash && (\r\n        <LoadingView onDismiss={wrappedOndismiss}>\r\n          <AutoColumn gap=\"12px\" justify={'center'}>\r\n            <TYPE.largeHeader>{usingDelegate ? 'Delegating votes' : 'Unlocking Votes'}</TYPE.largeHeader>\r\n            <TYPE.main fontSize={36}>{uniBalance?.toSignificant(4)}</TYPE.main>\r\n          </AutoColumn>\r\n        </LoadingView>\r\n      )}\r\n      {hash && (\r\n        <SubmittedView onDismiss={wrappedOndismiss} hash={hash}>\r\n          <AutoColumn gap=\"12px\" justify={'center'}>\r\n            <TYPE.largeHeader>Transaction Submitted</TYPE.largeHeader>\r\n            <TYPE.main fontSize={36}>{uniBalance?.toSignificant(4)}</TYPE.main>\r\n          </AutoColumn>\r\n        </SubmittedView>\r\n      )}\r\n    </Modal>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}