{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{splitSignature}from'@ethersproject/bytes';import{currencyEquals,ETHER,Percent,WETH}from'@uniswap/sdk';import React,{useCallback,useContext,useMemo,useState}from'react';import{ArrowDown,Plus}from'react-feather';import ReactGA from'react-ga';import{Text}from'rebass';import{ThemeContext}from'styled-components';import{ButtonPrimary,ButtonLight,ButtonError,ButtonConfirmed}from'../../components/Button';import{BlueCard,LightCard}from'../../components/Card';import{AutoColumn,ColumnCenter}from'../../components/Column';import TransactionConfirmationModal,{ConfirmationModalContent}from'../../components/TransactionConfirmationModal';import CurrencyInputPanel from'../../components/CurrencyInputPanel';import DoubleCurrencyLogo from'../../components/DoubleLogo';import{AddRemoveTabs}from'../../components/NavigationTabs';import{MinimalPositionCard}from'../../components/PositionCard';import Row,{RowBetween,RowFixed}from'../../components/Row';import Slider from'../../components/Slider';import CurrencyLogo from'../../components/CurrencyLogo';import{ROUTER_ADDRESS}from'../../constants';import{useActiveWeb3React}from'../../hooks';import{useCurrency}from'../../hooks/Tokens';import{usePairContract}from'../../hooks/useContract';import useIsArgentWallet from'../../hooks/useIsArgentWallet';import useTransactionDeadline from'../../hooks/useTransactionDeadline';import{useTransactionAdder}from'../../state/transactions/hooks';import{StyledInternalLink,TYPE}from'../../theme';import{calculateGasMargin,calculateSlippageAmount,getRouterContract}from'../../utils';import{currencyId}from'../../utils/currencyId';import useDebouncedChangeHandler from'../../utils/useDebouncedChangeHandler';import{wrappedCurrency}from'../../utils/wrappedCurrency';import AppBody from'../AppBody';import{ClickableText,MaxButton,Wrapper}from'../Pool/styleds';import{useApproveCallback,ApprovalState}from'../../hooks/useApproveCallback';import{Dots}from'../../components/swap/styleds';import{useBurnActionHandlers}from'../../state/burn/hooks';import{useDerivedBurnInfo,useBurnState}from'../../state/burn/hooks';import{Field}from'../../state/burn/actions';import{useWalletModalToggle}from'../../state/application/hooks';import{useUserSlippageTolerance}from'../../state/user/hooks';import{BigNumber}from'@ethersproject/bignumber';export default function RemoveLiquidity(_ref){var _useCurrency,_useCurrency2,_parsedAmounts$Field$,_parsedAmounts$Field$2,_parsedAmounts$Field$3,_parsedAmounts$Field$4,_parsedAmounts$Field$5,_parsedAmounts$Field$6,_formattedAmounts,_parsedAmounts$Field$7,_pair$liquidityToken,_parsedAmounts$Field$11,_parsedAmounts$Field$12;var history=_ref.history,_ref$match$params=_ref.match.params,currencyIdA=_ref$match$params.currencyIdA,currencyIdB=_ref$match$params.currencyIdB;var currencyA=(_useCurrency=useCurrency(currencyIdA))!==null&&_useCurrency!==void 0?_useCurrency:undefined,currencyB=(_useCurrency2=useCurrency(currencyIdB))!==null&&_useCurrency2!==void 0?_useCurrency2:undefined;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account,chainId=_useActiveWeb3React.chainId,library=_useActiveWeb3React.library;var _useMemo=useMemo(function(){return[wrappedCurrency(currencyA,chainId),wrappedCurrency(currencyB,chainId)];},[currencyA,currencyB,chainId]),_useMemo2=_slicedToArray(_useMemo,2),tokenA=_useMemo2[0],tokenB=_useMemo2[1];var theme=useContext(ThemeContext);// toggle wallet when disconnected\nvar toggleWalletModal=useWalletModalToggle();// burn state\nvar _useBurnState=useBurnState(),independentField=_useBurnState.independentField,typedValue=_useBurnState.typedValue;var _useDerivedBurnInfo=useDerivedBurnInfo(currencyA!==null&&currencyA!==void 0?currencyA:undefined,currencyB!==null&&currencyB!==void 0?currencyB:undefined),pair=_useDerivedBurnInfo.pair,parsedAmounts=_useDerivedBurnInfo.parsedAmounts,error=_useDerivedBurnInfo.error;var _useBurnActionHandler=useBurnActionHandlers(),_onUserInput=_useBurnActionHandler.onUserInput;var isValid=!error;// modal and loading\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showConfirm=_useState2[0],setShowConfirm=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showDetailed=_useState4[0],setShowDetailed=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),attemptingTxn=_useState6[0],setAttemptingTxn=_useState6[1];// clicked confirm\n// txn values\nvar _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),txHash=_useState8[0],setTxHash=_useState8[1];var deadline=useTransactionDeadline();var _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,1),allowedSlippage=_useUserSlippageToler2[0];var formattedAmounts=(_formattedAmounts={},_defineProperty(_formattedAmounts,Field.LIQUIDITY_PERCENT,parsedAmounts[Field.LIQUIDITY_PERCENT].equalTo('0')?'0':parsedAmounts[Field.LIQUIDITY_PERCENT].lessThan(new Percent('1','100'))?'<1':parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),_defineProperty(_formattedAmounts,Field.LIQUIDITY,independentField===Field.LIQUIDITY?typedValue:(_parsedAmounts$Field$=(_parsedAmounts$Field$2=parsedAmounts[Field.LIQUIDITY])===null||_parsedAmounts$Field$2===void 0?void 0:_parsedAmounts$Field$2.toSignificant(6))!==null&&_parsedAmounts$Field$!==void 0?_parsedAmounts$Field$:''),_defineProperty(_formattedAmounts,Field.CURRENCY_A,independentField===Field.CURRENCY_A?typedValue:(_parsedAmounts$Field$3=(_parsedAmounts$Field$4=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$4===void 0?void 0:_parsedAmounts$Field$4.toSignificant(6))!==null&&_parsedAmounts$Field$3!==void 0?_parsedAmounts$Field$3:''),_defineProperty(_formattedAmounts,Field.CURRENCY_B,independentField===Field.CURRENCY_B?typedValue:(_parsedAmounts$Field$5=(_parsedAmounts$Field$6=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$6===void 0?void 0:_parsedAmounts$Field$6.toSignificant(6))!==null&&_parsedAmounts$Field$5!==void 0?_parsedAmounts$Field$5:''),_formattedAmounts);var atMaxAmount=(_parsedAmounts$Field$7=parsedAmounts[Field.LIQUIDITY_PERCENT])===null||_parsedAmounts$Field$7===void 0?void 0:_parsedAmounts$Field$7.equalTo(new Percent('1'));// pair contract\nvar pairContract=usePairContract(pair===null||pair===void 0?void 0:(_pair$liquidityToken=pair.liquidityToken)===null||_pair$liquidityToken===void 0?void 0:_pair$liquidityToken.address);// allowance handling\nvar _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),signatureData=_useState10[0],setSignatureData=_useState10[1];var _useApproveCallback=useApproveCallback(parsedAmounts[Field.LIQUIDITY],ROUTER_ADDRESS),_useApproveCallback2=_slicedToArray(_useApproveCallback,2),approval=_useApproveCallback2[0],approveCallback=_useApproveCallback2[1];var isArgentWallet=useIsArgentWallet();function onAttemptToApprove(){return _onAttemptToApprove.apply(this,arguments);}// wrapped onUserInput to clear signatures\nfunction _onAttemptToApprove(){_onAttemptToApprove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var liquidityAmount,nonce,EIP712Domain,domain,Permit,message,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!pairContract||!pair||!library||!deadline)){_context.next=2;break;}throw new Error('missing dependencies');case 2:liquidityAmount=parsedAmounts[Field.LIQUIDITY];if(liquidityAmount){_context.next=5;break;}throw new Error('missing liquidity amount');case 5:if(!isArgentWallet){_context.next=7;break;}return _context.abrupt(\"return\",approveCallback());case 7:_context.next=9;return pairContract.nonces(account);case 9:nonce=_context.sent;EIP712Domain=[{name:'name',type:'string'},{name:'version',type:'string'},{name:'chainId',type:'uint256'},{name:'verifyingContract',type:'address'}];domain={name:'Uniswap V2',version:'1',chainId:chainId,verifyingContract:pair.liquidityToken.address};Permit=[{name:'owner',type:'address'},{name:'spender',type:'address'},{name:'value',type:'uint256'},{name:'nonce',type:'uint256'},{name:'deadline',type:'uint256'}];message={owner:account,spender:ROUTER_ADDRESS,value:liquidityAmount.raw.toString(),nonce:nonce.toHexString(),deadline:deadline.toNumber()};data=JSON.stringify({types:{EIP712Domain:EIP712Domain,Permit:Permit},domain:domain,primaryType:'Permit',message:message});library.send('eth_signTypedData_v4',[account,data]).then(splitSignature).then(function(signature){setSignatureData({v:signature.v,r:signature.r,s:signature.s,deadline:deadline.toNumber()});}).catch(function(error){// for all errors other than 4001 (EIP-1193 user rejected request), fall back to manual approve\nif((error===null||error===void 0?void 0:error.code)!==4001){approveCallback();}});case 16:case\"end\":return _context.stop();}}},_callee);}));return _onAttemptToApprove.apply(this,arguments);}var onUserInput=useCallback(function(field,typedValue){setSignatureData(null);return _onUserInput(field,typedValue);},[_onUserInput]);var onLiquidityInput=useCallback(function(typedValue){return onUserInput(Field.LIQUIDITY,typedValue);},[onUserInput]);var onCurrencyAInput=useCallback(function(typedValue){return onUserInput(Field.CURRENCY_A,typedValue);},[onUserInput]);var onCurrencyBInput=useCallback(function(typedValue){return onUserInput(Field.CURRENCY_B,typedValue);},[onUserInput]);// tx sending\nvar addTransaction=useTransactionAdder();function onRemove(){return _onRemove.apply(this,arguments);}function _onRemove(){_onRemove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _amountsMin;var currencyAmountA,currencyAmountB,router,amountsMin,liquidityAmount,currencyBIsETH,oneCurrencyIsETH,methodNames,args,safeGasEstimates,indexOfSuccessfulEstimation,methodName,safeGasEstimate;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!chainId||!library||!account||!deadline)){_context2.next=2;break;}throw new Error('missing dependencies');case 2:currencyAmountA=parsedAmounts[Field.CURRENCY_A],currencyAmountB=parsedAmounts[Field.CURRENCY_B];if(!(!currencyAmountA||!currencyAmountB)){_context2.next=5;break;}throw new Error('missing currency amounts');case 5:router=getRouterContract(chainId,library,account);amountsMin=(_amountsMin={},_defineProperty(_amountsMin,Field.CURRENCY_A,calculateSlippageAmount(currencyAmountA,allowedSlippage)[0]),_defineProperty(_amountsMin,Field.CURRENCY_B,calculateSlippageAmount(currencyAmountB,allowedSlippage)[0]),_amountsMin);if(!(!currencyA||!currencyB)){_context2.next=9;break;}throw new Error('missing tokens');case 9:liquidityAmount=parsedAmounts[Field.LIQUIDITY];if(liquidityAmount){_context2.next=12;break;}throw new Error('missing liquidity amount');case 12:currencyBIsETH=currencyB===ETHER;oneCurrencyIsETH=currencyA===ETHER||currencyBIsETH;if(!(!tokenA||!tokenB)){_context2.next=16;break;}throw new Error('could not wrap');case 16:if(!(approval===ApprovalState.APPROVED)){_context2.next=20;break;}// removeLiquidityETH\nif(oneCurrencyIsETH){methodNames=['removeLiquidityETH','removeLiquidityETHSupportingFeeOnTransferTokens'];args=[currencyBIsETH?tokenA.address:tokenB.address,liquidityAmount.raw.toString(),amountsMin[currencyBIsETH?Field.CURRENCY_A:Field.CURRENCY_B].toString(),amountsMin[currencyBIsETH?Field.CURRENCY_B:Field.CURRENCY_A].toString(),account,deadline.toHexString()];}// removeLiquidity\nelse{methodNames=['removeLiquidity'];args=[tokenA.address,tokenB.address,liquidityAmount.raw.toString(),amountsMin[Field.CURRENCY_A].toString(),amountsMin[Field.CURRENCY_B].toString(),account,deadline.toHexString()];}_context2.next=25;break;case 20:if(!(signatureData!==null)){_context2.next=24;break;}// removeLiquidityETHWithPermit\nif(oneCurrencyIsETH){methodNames=['removeLiquidityETHWithPermit','removeLiquidityETHWithPermitSupportingFeeOnTransferTokens'];args=[currencyBIsETH?tokenA.address:tokenB.address,liquidityAmount.raw.toString(),amountsMin[currencyBIsETH?Field.CURRENCY_A:Field.CURRENCY_B].toString(),amountsMin[currencyBIsETH?Field.CURRENCY_B:Field.CURRENCY_A].toString(),account,signatureData.deadline,false,signatureData.v,signatureData.r,signatureData.s];}// removeLiquidityETHWithPermit\nelse{methodNames=['removeLiquidityWithPermit'];args=[tokenA.address,tokenB.address,liquidityAmount.raw.toString(),amountsMin[Field.CURRENCY_A].toString(),amountsMin[Field.CURRENCY_B].toString(),account,signatureData.deadline,false,signatureData.v,signatureData.r,signatureData.s];}_context2.next=25;break;case 24:throw new Error('Attempting to confirm without approval or a signature. Please contact support.');case 25:_context2.next=27;return Promise.all(methodNames.map(function(methodName){var _router$estimateGas;return(_router$estimateGas=router.estimateGas)[methodName].apply(_router$estimateGas,_toConsumableArray(args)).then(calculateGasMargin).catch(function(error){console.error(\"estimateGas failed\",methodName,args,error);return undefined;});}));case 27:safeGasEstimates=_context2.sent;indexOfSuccessfulEstimation=safeGasEstimates.findIndex(function(safeGasEstimate){return BigNumber.isBigNumber(safeGasEstimate);});// all estimations failed...\nif(!(indexOfSuccessfulEstimation===-1)){_context2.next=33;break;}console.error('This transaction would fail. Please contact support.');_context2.next=38;break;case 33:methodName=methodNames[indexOfSuccessfulEstimation];safeGasEstimate=safeGasEstimates[indexOfSuccessfulEstimation];setAttemptingTxn(true);_context2.next=38;return router[methodName].apply(router,_toConsumableArray(args).concat([{gasLimit:safeGasEstimate}])).then(function(response){var _parsedAmounts$Field$13,_parsedAmounts$Field$14;setAttemptingTxn(false);addTransaction(response,{summary:'Remove '+((_parsedAmounts$Field$13=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$13===void 0?void 0:_parsedAmounts$Field$13.toSignificant(3))+' '+(currencyA===null||currencyA===void 0?void 0:currencyA.symbol)+' and '+((_parsedAmounts$Field$14=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$14===void 0?void 0:_parsedAmounts$Field$14.toSignificant(3))+' '+(currencyB===null||currencyB===void 0?void 0:currencyB.symbol)});setTxHash(response.hash);ReactGA.event({category:'Liquidity',action:'Remove',label:[currencyA===null||currencyA===void 0?void 0:currencyA.symbol,currencyB===null||currencyB===void 0?void 0:currencyB.symbol].join('/')});}).catch(function(error){setAttemptingTxn(false);// we only care if the error is something _other_ than the user rejected the tx\nconsole.error(error);});case 38:case\"end\":return _context2.stop();}}},_callee2);}));return _onRemove.apply(this,arguments);}function modalHeader(){var _parsedAmounts$Field$8,_parsedAmounts$Field$9;return/*#__PURE__*/React.createElement(AutoColumn,{gap:'md',style:{marginTop:'20px'}},/*#__PURE__*/React.createElement(RowBetween,{align:\"flex-end\"},/*#__PURE__*/React.createElement(Text,{fontSize:24,fontWeight:500},(_parsedAmounts$Field$8=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$8===void 0?void 0:_parsedAmounts$Field$8.toSignificant(6)),/*#__PURE__*/React.createElement(RowFixed,{gap:\"4px\"},/*#__PURE__*/React.createElement(CurrencyLogo,{currency:currencyA,size:'24px'}),/*#__PURE__*/React.createElement(Text,{fontSize:24,fontWeight:500,style:{marginLeft:'10px'}},currencyA===null||currencyA===void 0?void 0:currencyA.symbol))),/*#__PURE__*/React.createElement(RowFixed,null,/*#__PURE__*/React.createElement(Plus,{size:\"16\",color:theme.text2})),/*#__PURE__*/React.createElement(RowBetween,{align:\"flex-end\"},/*#__PURE__*/React.createElement(Text,{fontSize:24,fontWeight:500},(_parsedAmounts$Field$9=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$9===void 0?void 0:_parsedAmounts$Field$9.toSignificant(6)),/*#__PURE__*/React.createElement(RowFixed,{gap:\"4px\"},/*#__PURE__*/React.createElement(CurrencyLogo,{currency:currencyB,size:'24px'}),/*#__PURE__*/React.createElement(Text,{fontSize:24,fontWeight:500,style:{marginLeft:'10px'}},currencyB===null||currencyB===void 0?void 0:currencyB.symbol))),/*#__PURE__*/React.createElement(TYPE.italic,{fontSize:12,color:theme.text2,textAlign:\"left\",padding:'12px 0 0 0'},\"Output is estimated. If the price changes by more than \".concat(allowedSlippage/100,\"% your transaction will revert.\")));}function modalBottom(){var _parsedAmounts$Field$10;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(Text,{color:theme.text2,fontWeight:500,fontSize:16},'UNI '+(currencyA===null||currencyA===void 0?void 0:currencyA.symbol)+'/'+(currencyB===null||currencyB===void 0?void 0:currencyB.symbol),\" Burned\"),/*#__PURE__*/React.createElement(RowFixed,null,/*#__PURE__*/React.createElement(DoubleCurrencyLogo,{currency0:currencyA,currency1:currencyB,margin:true}),/*#__PURE__*/React.createElement(Text,{fontWeight:500,fontSize:16},(_parsedAmounts$Field$10=parsedAmounts[Field.LIQUIDITY])===null||_parsedAmounts$Field$10===void 0?void 0:_parsedAmounts$Field$10.toSignificant(6)))),pair&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(Text,{color:theme.text2,fontWeight:500,fontSize:16},\"Price\"),/*#__PURE__*/React.createElement(Text,{fontWeight:500,fontSize:16,color:theme.text1},\"1 \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" = \",tokenA?pair.priceOf(tokenA).toSignificant(6):'-',\" \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol)),/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(Text,{fontWeight:500,fontSize:16,color:theme.text1},\"1 \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol,\" = \",tokenB?pair.priceOf(tokenB).toSignificant(6):'-',\" \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol))),/*#__PURE__*/React.createElement(ButtonPrimary,{disabled:!(approval===ApprovalState.APPROVED||signatureData!==null),onClick:onRemove},/*#__PURE__*/React.createElement(Text,{fontWeight:500,fontSize:20},\"Confirm\")));}var pendingText=\"Removing \".concat((_parsedAmounts$Field$11=parsedAmounts[Field.CURRENCY_A])===null||_parsedAmounts$Field$11===void 0?void 0:_parsedAmounts$Field$11.toSignificant(6),\" \").concat(currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" and \").concat((_parsedAmounts$Field$12=parsedAmounts[Field.CURRENCY_B])===null||_parsedAmounts$Field$12===void 0?void 0:_parsedAmounts$Field$12.toSignificant(6),\" \").concat(currencyB===null||currencyB===void 0?void 0:currencyB.symbol);var liquidityPercentChangeCallback=useCallback(function(value){onUserInput(Field.LIQUIDITY_PERCENT,value.toString());},[onUserInput]);var oneCurrencyIsETH=currencyA===ETHER||currencyB===ETHER;var oneCurrencyIsWETH=Boolean(chainId&&(currencyA&&currencyEquals(WETH[chainId],currencyA)||currencyB&&currencyEquals(WETH[chainId],currencyB)));var handleSelectCurrencyA=useCallback(function(currency){if(currencyIdB&&currencyId(currency)===currencyIdB){history.push(\"/remove/\".concat(currencyId(currency),\"/\").concat(currencyIdA));}else{history.push(\"/remove/\".concat(currencyId(currency),\"/\").concat(currencyIdB));}},[currencyIdA,currencyIdB,history]);var handleSelectCurrencyB=useCallback(function(currency){if(currencyIdA&&currencyId(currency)===currencyIdA){history.push(\"/remove/\".concat(currencyIdB,\"/\").concat(currencyId(currency)));}else{history.push(\"/remove/\".concat(currencyIdA,\"/\").concat(currencyId(currency)));}},[currencyIdA,currencyIdB,history]);var handleDismissConfirmation=useCallback(function(){setShowConfirm(false);setSignatureData(null);// important that we clear signature data to avoid bad sigs\n// if there was a tx hash, we want to clear the input\nif(txHash){onUserInput(Field.LIQUIDITY_PERCENT,'0');}setTxHash('');},[onUserInput,txHash]);var _useDebouncedChangeHa=useDebouncedChangeHandler(Number.parseInt(parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),liquidityPercentChangeCallback),_useDebouncedChangeHa2=_slicedToArray(_useDebouncedChangeHa,2),innerLiquidityPercentage=_useDebouncedChangeHa2[0],setInnerLiquidityPercentage=_useDebouncedChangeHa2[1];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AppBody,null,/*#__PURE__*/React.createElement(AddRemoveTabs,{creating:false,adding:false}),/*#__PURE__*/React.createElement(Wrapper,null,/*#__PURE__*/React.createElement(TransactionConfirmationModal,{isOpen:showConfirm,onDismiss:handleDismissConfirmation,attemptingTxn:attemptingTxn,hash:txHash?txHash:'',content:function content(){return/*#__PURE__*/React.createElement(ConfirmationModalContent,{title:'You will receive',onDismiss:handleDismissConfirmation,topContent:modalHeader,bottomContent:modalBottom});},pendingText:pendingText}),/*#__PURE__*/React.createElement(AutoColumn,{gap:\"md\"},/*#__PURE__*/React.createElement(BlueCard,null,/*#__PURE__*/React.createElement(AutoColumn,{gap:\"10px\"},/*#__PURE__*/React.createElement(TYPE.link,{fontWeight:400,color:'primaryText1'},/*#__PURE__*/React.createElement(\"b\",null,\"Tip:\"),\" Removing pool tokens converts your position back into underlying tokens at the current rate, proportional to your share of the pool. Accrued fees are included in the amounts you receive.\"))),/*#__PURE__*/React.createElement(LightCard,null,/*#__PURE__*/React.createElement(AutoColumn,{gap:\"20px\"},/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(Text,{fontWeight:500},\"Amount\"),/*#__PURE__*/React.createElement(ClickableText,{fontWeight:500,onClick:function onClick(){setShowDetailed(!showDetailed);}},showDetailed?'Simple':'Detailed')),/*#__PURE__*/React.createElement(Row,{style:{alignItems:'flex-end'}},/*#__PURE__*/React.createElement(Text,{fontSize:72,fontWeight:500},formattedAmounts[Field.LIQUIDITY_PERCENT],\"%\")),!showDetailed&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Slider,{value:innerLiquidityPercentage,onChange:setInnerLiquidityPercentage}),/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(MaxButton,{onClick:function onClick(){return onUserInput(Field.LIQUIDITY_PERCENT,'25');},width:\"20%\"},\"25%\"),/*#__PURE__*/React.createElement(MaxButton,{onClick:function onClick(){return onUserInput(Field.LIQUIDITY_PERCENT,'50');},width:\"20%\"},\"50%\"),/*#__PURE__*/React.createElement(MaxButton,{onClick:function onClick(){return onUserInput(Field.LIQUIDITY_PERCENT,'75');},width:\"20%\"},\"75%\"),/*#__PURE__*/React.createElement(MaxButton,{onClick:function onClick(){return onUserInput(Field.LIQUIDITY_PERCENT,'100');},width:\"20%\"},\"Max\"))))),!showDetailed&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ColumnCenter,null,/*#__PURE__*/React.createElement(ArrowDown,{size:\"16\",color:theme.text2})),/*#__PURE__*/React.createElement(LightCard,null,/*#__PURE__*/React.createElement(AutoColumn,{gap:\"10px\"},/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(Text,{fontSize:24,fontWeight:500},formattedAmounts[Field.CURRENCY_A]||'-'),/*#__PURE__*/React.createElement(RowFixed,null,/*#__PURE__*/React.createElement(CurrencyLogo,{currency:currencyA,style:{marginRight:'12px'}}),/*#__PURE__*/React.createElement(Text,{fontSize:24,fontWeight:500,id:\"remove-liquidity-tokena-symbol\"},currencyA===null||currencyA===void 0?void 0:currencyA.symbol))),/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(Text,{fontSize:24,fontWeight:500},formattedAmounts[Field.CURRENCY_B]||'-'),/*#__PURE__*/React.createElement(RowFixed,null,/*#__PURE__*/React.createElement(CurrencyLogo,{currency:currencyB,style:{marginRight:'12px'}}),/*#__PURE__*/React.createElement(Text,{fontSize:24,fontWeight:500,id:\"remove-liquidity-tokenb-symbol\"},currencyB===null||currencyB===void 0?void 0:currencyB.symbol))),chainId&&(oneCurrencyIsWETH||oneCurrencyIsETH)?/*#__PURE__*/React.createElement(RowBetween,{style:{justifyContent:'flex-end'}},oneCurrencyIsETH?/*#__PURE__*/React.createElement(StyledInternalLink,{to:\"/remove/\".concat(currencyA===ETHER?WETH[chainId].address:currencyIdA,\"/\").concat(currencyB===ETHER?WETH[chainId].address:currencyIdB)},\"Receive WETH\"):oneCurrencyIsWETH?/*#__PURE__*/React.createElement(StyledInternalLink,{to:\"/remove/\".concat(currencyA&&currencyEquals(currencyA,WETH[chainId])?'ETH':currencyIdA,\"/\").concat(currencyB&&currencyEquals(currencyB,WETH[chainId])?'ETH':currencyIdB)},\"Receive ETH\"):null):null))),showDetailed&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CurrencyInputPanel,{value:formattedAmounts[Field.LIQUIDITY],onUserInput:onLiquidityInput,onMax:function onMax(){onUserInput(Field.LIQUIDITY_PERCENT,'100');},showMaxButton:!atMaxAmount,disableCurrencySelect:true,currency:pair===null||pair===void 0?void 0:pair.liquidityToken,pair:pair,id:\"liquidity-amount\"}),/*#__PURE__*/React.createElement(ColumnCenter,null,/*#__PURE__*/React.createElement(ArrowDown,{size:\"16\",color:theme.text2})),/*#__PURE__*/React.createElement(CurrencyInputPanel,{hideBalance:true,value:formattedAmounts[Field.CURRENCY_A],onUserInput:onCurrencyAInput,onMax:function onMax(){return onUserInput(Field.LIQUIDITY_PERCENT,'100');},showMaxButton:!atMaxAmount,currency:currencyA,label:'Output',onCurrencySelect:handleSelectCurrencyA,id:\"remove-liquidity-tokena\"}),/*#__PURE__*/React.createElement(ColumnCenter,null,/*#__PURE__*/React.createElement(Plus,{size:\"16\",color:theme.text2})),/*#__PURE__*/React.createElement(CurrencyInputPanel,{hideBalance:true,value:formattedAmounts[Field.CURRENCY_B],onUserInput:onCurrencyBInput,onMax:function onMax(){return onUserInput(Field.LIQUIDITY_PERCENT,'100');},showMaxButton:!atMaxAmount,currency:currencyB,label:'Output',onCurrencySelect:handleSelectCurrencyB,id:\"remove-liquidity-tokenb\"})),pair&&/*#__PURE__*/React.createElement(\"div\",{style:{padding:'10px 20px'}},/*#__PURE__*/React.createElement(RowBetween,null,\"Price:\",/*#__PURE__*/React.createElement(\"div\",null,\"1 \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol,\" = \",tokenA?pair.priceOf(tokenA).toSignificant(6):'-',\" \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol)),/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null,\"1 \",currencyB===null||currencyB===void 0?void 0:currencyB.symbol,\" = \",tokenB?pair.priceOf(tokenB).toSignificant(6):'-',\" \",currencyA===null||currencyA===void 0?void 0:currencyA.symbol))),/*#__PURE__*/React.createElement(\"div\",{style:{position:'relative'}},!account?/*#__PURE__*/React.createElement(ButtonLight,{onClick:toggleWalletModal},\"Connect Wallet\"):/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(ButtonConfirmed,{onClick:onAttemptToApprove,confirmed:approval===ApprovalState.APPROVED||signatureData!==null,disabled:approval!==ApprovalState.NOT_APPROVED||signatureData!==null,mr:\"0.5rem\",fontWeight:500,fontSize:16},approval===ApprovalState.PENDING?/*#__PURE__*/React.createElement(Dots,null,\"Approving\"):approval===ApprovalState.APPROVED||signatureData!==null?'Approved':'Approve'),/*#__PURE__*/React.createElement(ButtonError,{onClick:function onClick(){setShowConfirm(true);},disabled:!isValid||signatureData===null&&approval!==ApprovalState.APPROVED,error:!isValid&&!!parsedAmounts[Field.CURRENCY_A]&&!!parsedAmounts[Field.CURRENCY_B]},/*#__PURE__*/React.createElement(Text,{fontSize:16,fontWeight:500},error||'Remove'))))))),pair?/*#__PURE__*/React.createElement(AutoColumn,{style:{minWidth:'20rem',width:'100%',maxWidth:'400px',marginTop:'1rem'}},/*#__PURE__*/React.createElement(MinimalPositionCard,{showUnwrapped:oneCurrencyIsWETH,pair:pair})):null);}","map":{"version":3,"sources":["C:/Users/Darrius/Documents/GitHub/swap-interface/src/pages/RemoveLiquidity/index.tsx"],"names":["splitSignature","currencyEquals","ETHER","Percent","WETH","React","useCallback","useContext","useMemo","useState","ArrowDown","Plus","ReactGA","Text","ThemeContext","ButtonPrimary","ButtonLight","ButtonError","ButtonConfirmed","BlueCard","LightCard","AutoColumn","ColumnCenter","TransactionConfirmationModal","ConfirmationModalContent","CurrencyInputPanel","DoubleCurrencyLogo","AddRemoveTabs","MinimalPositionCard","Row","RowBetween","RowFixed","Slider","CurrencyLogo","ROUTER_ADDRESS","useActiveWeb3React","useCurrency","usePairContract","useIsArgentWallet","useTransactionDeadline","useTransactionAdder","StyledInternalLink","TYPE","calculateGasMargin","calculateSlippageAmount","getRouterContract","currencyId","useDebouncedChangeHandler","wrappedCurrency","AppBody","ClickableText","MaxButton","Wrapper","useApproveCallback","ApprovalState","Dots","useBurnActionHandlers","useDerivedBurnInfo","useBurnState","Field","useWalletModalToggle","useUserSlippageTolerance","BigNumber","RemoveLiquidity","history","match","params","currencyIdA","currencyIdB","currencyA","undefined","currencyB","account","chainId","library","tokenA","tokenB","theme","toggleWalletModal","independentField","typedValue","pair","parsedAmounts","error","_onUserInput","onUserInput","isValid","showConfirm","setShowConfirm","showDetailed","setShowDetailed","attemptingTxn","setAttemptingTxn","txHash","setTxHash","deadline","allowedSlippage","formattedAmounts","LIQUIDITY_PERCENT","equalTo","lessThan","toFixed","LIQUIDITY","toSignificant","CURRENCY_A","CURRENCY_B","atMaxAmount","pairContract","liquidityToken","address","signatureData","setSignatureData","approval","approveCallback","isArgentWallet","onAttemptToApprove","Error","liquidityAmount","nonces","nonce","EIP712Domain","name","type","domain","version","verifyingContract","Permit","message","owner","spender","value","raw","toString","toHexString","toNumber","data","JSON","stringify","types","primaryType","send","then","signature","v","r","s","catch","code","field","onLiquidityInput","onCurrencyAInput","onCurrencyBInput","addTransaction","onRemove","currencyAmountA","currencyAmountB","router","amountsMin","currencyBIsETH","oneCurrencyIsETH","APPROVED","methodNames","args","Promise","all","map","methodName","estimateGas","console","safeGasEstimates","indexOfSuccessfulEstimation","findIndex","safeGasEstimate","isBigNumber","gasLimit","response","summary","symbol","hash","event","category","action","label","join","modalHeader","marginTop","marginLeft","text2","modalBottom","text1","priceOf","pendingText","liquidityPercentChangeCallback","oneCurrencyIsWETH","Boolean","handleSelectCurrencyA","currency","push","handleSelectCurrencyB","handleDismissConfirmation","Number","parseInt","innerLiquidityPercentage","setInnerLiquidityPercentage","alignItems","marginRight","justifyContent","padding","position","NOT_APPROVED","PENDING","minWidth","width","maxWidth"],"mappings":"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","sourcesContent":["import { splitSignature } from '@ethersproject/bytes'\r\nimport { Contract } from '@ethersproject/contracts'\r\nimport { TransactionResponse } from '@ethersproject/providers'\r\nimport { Currency, currencyEquals, ETHER, Percent, WETH } from '@uniswap/sdk'\r\nimport React, { useCallback, useContext, useMemo, useState } from 'react'\r\nimport { ArrowDown, Plus } from 'react-feather'\r\nimport ReactGA from 'react-ga'\r\nimport { RouteComponentProps } from 'react-router'\r\nimport { Text } from 'rebass'\r\nimport { ThemeContext } from 'styled-components'\r\nimport { ButtonPrimary, ButtonLight, ButtonError, ButtonConfirmed } from '../../components/Button'\r\nimport { BlueCard, LightCard } from '../../components/Card'\r\nimport { AutoColumn, ColumnCenter } from '../../components/Column'\r\nimport TransactionConfirmationModal, { ConfirmationModalContent } from '../../components/TransactionConfirmationModal'\r\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\r\nimport DoubleCurrencyLogo from '../../components/DoubleLogo'\r\nimport { AddRemoveTabs } from '../../components/NavigationTabs'\r\nimport { MinimalPositionCard } from '../../components/PositionCard'\r\nimport Row, { RowBetween, RowFixed } from '../../components/Row'\r\n\r\nimport Slider from '../../components/Slider'\r\nimport CurrencyLogo from '../../components/CurrencyLogo'\r\nimport { ROUTER_ADDRESS } from '../../constants'\r\nimport { useActiveWeb3React } from '../../hooks'\r\nimport { useCurrency } from '../../hooks/Tokens'\r\nimport { usePairContract } from '../../hooks/useContract'\r\nimport useIsArgentWallet from '../../hooks/useIsArgentWallet'\r\nimport useTransactionDeadline from '../../hooks/useTransactionDeadline'\r\n\r\nimport { useTransactionAdder } from '../../state/transactions/hooks'\r\nimport { StyledInternalLink, TYPE } from '../../theme'\r\nimport { calculateGasMargin, calculateSlippageAmount, getRouterContract } from '../../utils'\r\nimport { currencyId } from '../../utils/currencyId'\r\nimport useDebouncedChangeHandler from '../../utils/useDebouncedChangeHandler'\r\nimport { wrappedCurrency } from '../../utils/wrappedCurrency'\r\nimport AppBody from '../AppBody'\r\nimport { ClickableText, MaxButton, Wrapper } from '../Pool/styleds'\r\nimport { useApproveCallback, ApprovalState } from '../../hooks/useApproveCallback'\r\nimport { Dots } from '../../components/swap/styleds'\r\nimport { useBurnActionHandlers } from '../../state/burn/hooks'\r\nimport { useDerivedBurnInfo, useBurnState } from '../../state/burn/hooks'\r\nimport { Field } from '../../state/burn/actions'\r\nimport { useWalletModalToggle } from '../../state/application/hooks'\r\nimport { useUserSlippageTolerance } from '../../state/user/hooks'\r\nimport { BigNumber } from '@ethersproject/bignumber'\r\n\r\nexport default function RemoveLiquidity({\r\n  history,\r\n  match: {\r\n    params: { currencyIdA, currencyIdB }\r\n  }\r\n}: RouteComponentProps<{ currencyIdA: string; currencyIdB: string }>) {\r\n  const [currencyA, currencyB] = [useCurrency(currencyIdA) ?? undefined, useCurrency(currencyIdB) ?? undefined]\r\n  const { account, chainId, library } = useActiveWeb3React()\r\n  const [tokenA, tokenB] = useMemo(() => [wrappedCurrency(currencyA, chainId), wrappedCurrency(currencyB, chainId)], [\r\n    currencyA,\r\n    currencyB,\r\n    chainId\r\n  ])\r\n\r\n  const theme = useContext(ThemeContext)\r\n\r\n  // toggle wallet when disconnected\r\n  const toggleWalletModal = useWalletModalToggle()\r\n\r\n  // burn state\r\n  const { independentField, typedValue } = useBurnState()\r\n  const { pair, parsedAmounts, error } = useDerivedBurnInfo(currencyA ?? undefined, currencyB ?? undefined)\r\n  const { onUserInput: _onUserInput } = useBurnActionHandlers()\r\n  const isValid = !error\r\n\r\n  // modal and loading\r\n  const [showConfirm, setShowConfirm] = useState<boolean>(false)\r\n  const [showDetailed, setShowDetailed] = useState<boolean>(false)\r\n  const [attemptingTxn, setAttemptingTxn] = useState(false) // clicked confirm\r\n\r\n  // txn values\r\n  const [txHash, setTxHash] = useState<string>('')\r\n  const deadline = useTransactionDeadline()\r\n  const [allowedSlippage] = useUserSlippageTolerance()\r\n\r\n  const formattedAmounts = {\r\n    [Field.LIQUIDITY_PERCENT]: parsedAmounts[Field.LIQUIDITY_PERCENT].equalTo('0')\r\n      ? '0'\r\n      : parsedAmounts[Field.LIQUIDITY_PERCENT].lessThan(new Percent('1', '100'))\r\n      ? '<1'\r\n      : parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0),\r\n    [Field.LIQUIDITY]:\r\n      independentField === Field.LIQUIDITY ? typedValue : parsedAmounts[Field.LIQUIDITY]?.toSignificant(6) ?? '',\r\n    [Field.CURRENCY_A]:\r\n      independentField === Field.CURRENCY_A ? typedValue : parsedAmounts[Field.CURRENCY_A]?.toSignificant(6) ?? '',\r\n    [Field.CURRENCY_B]:\r\n      independentField === Field.CURRENCY_B ? typedValue : parsedAmounts[Field.CURRENCY_B]?.toSignificant(6) ?? ''\r\n  }\r\n\r\n  const atMaxAmount = parsedAmounts[Field.LIQUIDITY_PERCENT]?.equalTo(new Percent('1'))\r\n\r\n  // pair contract\r\n  const pairContract: Contract | null = usePairContract(pair?.liquidityToken?.address)\r\n\r\n  // allowance handling\r\n  const [signatureData, setSignatureData] = useState<{ v: number; r: string; s: string; deadline: number } | null>(null)\r\n  const [approval, approveCallback] = useApproveCallback(parsedAmounts[Field.LIQUIDITY], ROUTER_ADDRESS)\r\n\r\n  const isArgentWallet = useIsArgentWallet()\r\n\r\n  async function onAttemptToApprove() {\r\n    if (!pairContract || !pair || !library || !deadline) throw new Error('missing dependencies')\r\n    const liquidityAmount = parsedAmounts[Field.LIQUIDITY]\r\n    if (!liquidityAmount) throw new Error('missing liquidity amount')\r\n\r\n    if (isArgentWallet) {\r\n      return approveCallback()\r\n    }\r\n\r\n    // try to gather a signature for permission\r\n    const nonce = await pairContract.nonces(account)\r\n\r\n    const EIP712Domain = [\r\n      { name: 'name', type: 'string' },\r\n      { name: 'version', type: 'string' },\r\n      { name: 'chainId', type: 'uint256' },\r\n      { name: 'verifyingContract', type: 'address' }\r\n    ]\r\n    const domain = {\r\n      name: 'Uniswap V2',\r\n      version: '1',\r\n      chainId: chainId,\r\n      verifyingContract: pair.liquidityToken.address\r\n    }\r\n    const Permit = [\r\n      { name: 'owner', type: 'address' },\r\n      { name: 'spender', type: 'address' },\r\n      { name: 'value', type: 'uint256' },\r\n      { name: 'nonce', type: 'uint256' },\r\n      { name: 'deadline', type: 'uint256' }\r\n    ]\r\n    const message = {\r\n      owner: account,\r\n      spender: ROUTER_ADDRESS,\r\n      value: liquidityAmount.raw.toString(),\r\n      nonce: nonce.toHexString(),\r\n      deadline: deadline.toNumber()\r\n    }\r\n    const data = JSON.stringify({\r\n      types: {\r\n        EIP712Domain,\r\n        Permit\r\n      },\r\n      domain,\r\n      primaryType: 'Permit',\r\n      message\r\n    })\r\n\r\n    library\r\n      .send('eth_signTypedData_v4', [account, data])\r\n      .then(splitSignature)\r\n      .then(signature => {\r\n        setSignatureData({\r\n          v: signature.v,\r\n          r: signature.r,\r\n          s: signature.s,\r\n          deadline: deadline.toNumber()\r\n        })\r\n      })\r\n      .catch(error => {\r\n        // for all errors other than 4001 (EIP-1193 user rejected request), fall back to manual approve\r\n        if (error?.code !== 4001) {\r\n          approveCallback()\r\n        }\r\n      })\r\n  }\r\n\r\n  // wrapped onUserInput to clear signatures\r\n  const onUserInput = useCallback(\r\n    (field: Field, typedValue: string) => {\r\n      setSignatureData(null)\r\n      return _onUserInput(field, typedValue)\r\n    },\r\n    [_onUserInput]\r\n  )\r\n\r\n  const onLiquidityInput = useCallback((typedValue: string): void => onUserInput(Field.LIQUIDITY, typedValue), [\r\n    onUserInput\r\n  ])\r\n  const onCurrencyAInput = useCallback((typedValue: string): void => onUserInput(Field.CURRENCY_A, typedValue), [\r\n    onUserInput\r\n  ])\r\n  const onCurrencyBInput = useCallback((typedValue: string): void => onUserInput(Field.CURRENCY_B, typedValue), [\r\n    onUserInput\r\n  ])\r\n\r\n  // tx sending\r\n  const addTransaction = useTransactionAdder()\r\n  async function onRemove() {\r\n    if (!chainId || !library || !account || !deadline) throw new Error('missing dependencies')\r\n    const { [Field.CURRENCY_A]: currencyAmountA, [Field.CURRENCY_B]: currencyAmountB } = parsedAmounts\r\n    if (!currencyAmountA || !currencyAmountB) {\r\n      throw new Error('missing currency amounts')\r\n    }\r\n    const router = getRouterContract(chainId, library, account)\r\n\r\n    const amountsMin = {\r\n      [Field.CURRENCY_A]: calculateSlippageAmount(currencyAmountA, allowedSlippage)[0],\r\n      [Field.CURRENCY_B]: calculateSlippageAmount(currencyAmountB, allowedSlippage)[0]\r\n    }\r\n\r\n    if (!currencyA || !currencyB) throw new Error('missing tokens')\r\n    const liquidityAmount = parsedAmounts[Field.LIQUIDITY]\r\n    if (!liquidityAmount) throw new Error('missing liquidity amount')\r\n\r\n    const currencyBIsETH = currencyB === ETHER\r\n    const oneCurrencyIsETH = currencyA === ETHER || currencyBIsETH\r\n\r\n    if (!tokenA || !tokenB) throw new Error('could not wrap')\r\n\r\n    let methodNames: string[], args: Array<string | string[] | number | boolean>\r\n    // we have approval, use normal remove liquidity\r\n    if (approval === ApprovalState.APPROVED) {\r\n      // removeLiquidityETH\r\n      if (oneCurrencyIsETH) {\r\n        methodNames = ['removeLiquidityETH', 'removeLiquidityETHSupportingFeeOnTransferTokens']\r\n        args = [\r\n          currencyBIsETH ? tokenA.address : tokenB.address,\r\n          liquidityAmount.raw.toString(),\r\n          amountsMin[currencyBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(),\r\n          amountsMin[currencyBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(),\r\n          account,\r\n          deadline.toHexString()\r\n        ]\r\n      }\r\n      // removeLiquidity\r\n      else {\r\n        methodNames = ['removeLiquidity']\r\n        args = [\r\n          tokenA.address,\r\n          tokenB.address,\r\n          liquidityAmount.raw.toString(),\r\n          amountsMin[Field.CURRENCY_A].toString(),\r\n          amountsMin[Field.CURRENCY_B].toString(),\r\n          account,\r\n          deadline.toHexString()\r\n        ]\r\n      }\r\n    }\r\n    // we have a signataure, use permit versions of remove liquidity\r\n    else if (signatureData !== null) {\r\n      // removeLiquidityETHWithPermit\r\n      if (oneCurrencyIsETH) {\r\n        methodNames = ['removeLiquidityETHWithPermit', 'removeLiquidityETHWithPermitSupportingFeeOnTransferTokens']\r\n        args = [\r\n          currencyBIsETH ? tokenA.address : tokenB.address,\r\n          liquidityAmount.raw.toString(),\r\n          amountsMin[currencyBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(),\r\n          amountsMin[currencyBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(),\r\n          account,\r\n          signatureData.deadline,\r\n          false,\r\n          signatureData.v,\r\n          signatureData.r,\r\n          signatureData.s\r\n        ]\r\n      }\r\n      // removeLiquidityETHWithPermit\r\n      else {\r\n        methodNames = ['removeLiquidityWithPermit']\r\n        args = [\r\n          tokenA.address,\r\n          tokenB.address,\r\n          liquidityAmount.raw.toString(),\r\n          amountsMin[Field.CURRENCY_A].toString(),\r\n          amountsMin[Field.CURRENCY_B].toString(),\r\n          account,\r\n          signatureData.deadline,\r\n          false,\r\n          signatureData.v,\r\n          signatureData.r,\r\n          signatureData.s\r\n        ]\r\n      }\r\n    } else {\r\n      throw new Error('Attempting to confirm without approval or a signature. Please contact support.')\r\n    }\r\n\r\n    const safeGasEstimates: (BigNumber | undefined)[] = await Promise.all(\r\n      methodNames.map(methodName =>\r\n        router.estimateGas[methodName](...args)\r\n          .then(calculateGasMargin)\r\n          .catch(error => {\r\n            console.error(`estimateGas failed`, methodName, args, error)\r\n            return undefined\r\n          })\r\n      )\r\n    )\r\n\r\n    const indexOfSuccessfulEstimation = safeGasEstimates.findIndex(safeGasEstimate =>\r\n      BigNumber.isBigNumber(safeGasEstimate)\r\n    )\r\n\r\n    // all estimations failed...\r\n    if (indexOfSuccessfulEstimation === -1) {\r\n      console.error('This transaction would fail. Please contact support.')\r\n    } else {\r\n      const methodName = methodNames[indexOfSuccessfulEstimation]\r\n      const safeGasEstimate = safeGasEstimates[indexOfSuccessfulEstimation]\r\n\r\n      setAttemptingTxn(true)\r\n      await router[methodName](...args, {\r\n        gasLimit: safeGasEstimate\r\n      })\r\n        .then((response: TransactionResponse) => {\r\n          setAttemptingTxn(false)\r\n\r\n          addTransaction(response, {\r\n            summary:\r\n              'Remove ' +\r\n              parsedAmounts[Field.CURRENCY_A]?.toSignificant(3) +\r\n              ' ' +\r\n              currencyA?.symbol +\r\n              ' and ' +\r\n              parsedAmounts[Field.CURRENCY_B]?.toSignificant(3) +\r\n              ' ' +\r\n              currencyB?.symbol\r\n          })\r\n\r\n          setTxHash(response.hash)\r\n\r\n          ReactGA.event({\r\n            category: 'Liquidity',\r\n            action: 'Remove',\r\n            label: [currencyA?.symbol, currencyB?.symbol].join('/')\r\n          })\r\n        })\r\n        .catch((error: Error) => {\r\n          setAttemptingTxn(false)\r\n          // we only care if the error is something _other_ than the user rejected the tx\r\n          console.error(error)\r\n        })\r\n    }\r\n  }\r\n\r\n  function modalHeader() {\r\n    return (\r\n      <AutoColumn gap={'md'} style={{ marginTop: '20px' }}>\r\n        <RowBetween align=\"flex-end\">\r\n          <Text fontSize={24} fontWeight={500}>\r\n            {parsedAmounts[Field.CURRENCY_A]?.toSignificant(6)}\r\n          </Text>\r\n          <RowFixed gap=\"4px\">\r\n            <CurrencyLogo currency={currencyA} size={'24px'} />\r\n            <Text fontSize={24} fontWeight={500} style={{ marginLeft: '10px' }}>\r\n              {currencyA?.symbol}\r\n            </Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n        <RowFixed>\r\n          <Plus size=\"16\" color={theme.text2} />\r\n        </RowFixed>\r\n        <RowBetween align=\"flex-end\">\r\n          <Text fontSize={24} fontWeight={500}>\r\n            {parsedAmounts[Field.CURRENCY_B]?.toSignificant(6)}\r\n          </Text>\r\n          <RowFixed gap=\"4px\">\r\n            <CurrencyLogo currency={currencyB} size={'24px'} />\r\n            <Text fontSize={24} fontWeight={500} style={{ marginLeft: '10px' }}>\r\n              {currencyB?.symbol}\r\n            </Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n\r\n        <TYPE.italic fontSize={12} color={theme.text2} textAlign=\"left\" padding={'12px 0 0 0'}>\r\n          {`Output is estimated. If the price changes by more than ${allowedSlippage /\r\n            100}% your transaction will revert.`}\r\n        </TYPE.italic>\r\n      </AutoColumn>\r\n    )\r\n  }\r\n\r\n  function modalBottom() {\r\n    return (\r\n      <>\r\n        <RowBetween>\r\n          <Text color={theme.text2} fontWeight={500} fontSize={16}>\r\n            {'UNI ' + currencyA?.symbol + '/' + currencyB?.symbol} Burned\r\n          </Text>\r\n          <RowFixed>\r\n            <DoubleCurrencyLogo currency0={currencyA} currency1={currencyB} margin={true} />\r\n            <Text fontWeight={500} fontSize={16}>\r\n              {parsedAmounts[Field.LIQUIDITY]?.toSignificant(6)}\r\n            </Text>\r\n          </RowFixed>\r\n        </RowBetween>\r\n        {pair && (\r\n          <>\r\n            <RowBetween>\r\n              <Text color={theme.text2} fontWeight={500} fontSize={16}>\r\n                Price\r\n              </Text>\r\n              <Text fontWeight={500} fontSize={16} color={theme.text1}>\r\n                1 {currencyA?.symbol} = {tokenA ? pair.priceOf(tokenA).toSignificant(6) : '-'} {currencyB?.symbol}\r\n              </Text>\r\n            </RowBetween>\r\n            <RowBetween>\r\n              <div />\r\n              <Text fontWeight={500} fontSize={16} color={theme.text1}>\r\n                1 {currencyB?.symbol} = {tokenB ? pair.priceOf(tokenB).toSignificant(6) : '-'} {currencyA?.symbol}\r\n              </Text>\r\n            </RowBetween>\r\n          </>\r\n        )}\r\n        <ButtonPrimary disabled={!(approval === ApprovalState.APPROVED || signatureData !== null)} onClick={onRemove}>\r\n          <Text fontWeight={500} fontSize={20}>\r\n            Confirm\r\n          </Text>\r\n        </ButtonPrimary>\r\n      </>\r\n    )\r\n  }\r\n\r\n  const pendingText = `Removing ${parsedAmounts[Field.CURRENCY_A]?.toSignificant(6)} ${\r\n    currencyA?.symbol\r\n  } and ${parsedAmounts[Field.CURRENCY_B]?.toSignificant(6)} ${currencyB?.symbol}`\r\n\r\n  const liquidityPercentChangeCallback = useCallback(\r\n    (value: number) => {\r\n      onUserInput(Field.LIQUIDITY_PERCENT, value.toString())\r\n    },\r\n    [onUserInput]\r\n  )\r\n\r\n  const oneCurrencyIsETH = currencyA === ETHER || currencyB === ETHER\r\n  const oneCurrencyIsWETH = Boolean(\r\n    chainId &&\r\n      ((currencyA && currencyEquals(WETH[chainId], currencyA)) ||\r\n        (currencyB && currencyEquals(WETH[chainId], currencyB)))\r\n  )\r\n\r\n  const handleSelectCurrencyA = useCallback(\r\n    (currency: Currency) => {\r\n      if (currencyIdB && currencyId(currency) === currencyIdB) {\r\n        history.push(`/remove/${currencyId(currency)}/${currencyIdA}`)\r\n      } else {\r\n        history.push(`/remove/${currencyId(currency)}/${currencyIdB}`)\r\n      }\r\n    },\r\n    [currencyIdA, currencyIdB, history]\r\n  )\r\n  const handleSelectCurrencyB = useCallback(\r\n    (currency: Currency) => {\r\n      if (currencyIdA && currencyId(currency) === currencyIdA) {\r\n        history.push(`/remove/${currencyIdB}/${currencyId(currency)}`)\r\n      } else {\r\n        history.push(`/remove/${currencyIdA}/${currencyId(currency)}`)\r\n      }\r\n    },\r\n    [currencyIdA, currencyIdB, history]\r\n  )\r\n\r\n  const handleDismissConfirmation = useCallback(() => {\r\n    setShowConfirm(false)\r\n    setSignatureData(null) // important that we clear signature data to avoid bad sigs\r\n    // if there was a tx hash, we want to clear the input\r\n    if (txHash) {\r\n      onUserInput(Field.LIQUIDITY_PERCENT, '0')\r\n    }\r\n    setTxHash('')\r\n  }, [onUserInput, txHash])\r\n\r\n  const [innerLiquidityPercentage, setInnerLiquidityPercentage] = useDebouncedChangeHandler(\r\n    Number.parseInt(parsedAmounts[Field.LIQUIDITY_PERCENT].toFixed(0)),\r\n    liquidityPercentChangeCallback\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <AppBody>\r\n        <AddRemoveTabs creating={false} adding={false} />\r\n        <Wrapper>\r\n          <TransactionConfirmationModal\r\n            isOpen={showConfirm}\r\n            onDismiss={handleDismissConfirmation}\r\n            attemptingTxn={attemptingTxn}\r\n            hash={txHash ? txHash : ''}\r\n            content={() => (\r\n              <ConfirmationModalContent\r\n                title={'You will receive'}\r\n                onDismiss={handleDismissConfirmation}\r\n                topContent={modalHeader}\r\n                bottomContent={modalBottom}\r\n              />\r\n            )}\r\n            pendingText={pendingText}\r\n          />\r\n          <AutoColumn gap=\"md\">\r\n            <BlueCard>\r\n              <AutoColumn gap=\"10px\">\r\n                <TYPE.link fontWeight={400} color={'primaryText1'}>\r\n                  <b>Tip:</b> Removing pool tokens converts your position back into underlying tokens at the current\r\n                  rate, proportional to your share of the pool. Accrued fees are included in the amounts you receive.\r\n                </TYPE.link>\r\n              </AutoColumn>\r\n            </BlueCard>\r\n            <LightCard>\r\n              <AutoColumn gap=\"20px\">\r\n                <RowBetween>\r\n                  <Text fontWeight={500}>Amount</Text>\r\n                  <ClickableText\r\n                    fontWeight={500}\r\n                    onClick={() => {\r\n                      setShowDetailed(!showDetailed)\r\n                    }}\r\n                  >\r\n                    {showDetailed ? 'Simple' : 'Detailed'}\r\n                  </ClickableText>\r\n                </RowBetween>\r\n                <Row style={{ alignItems: 'flex-end' }}>\r\n                  <Text fontSize={72} fontWeight={500}>\r\n                    {formattedAmounts[Field.LIQUIDITY_PERCENT]}%\r\n                  </Text>\r\n                </Row>\r\n                {!showDetailed && (\r\n                  <>\r\n                    <Slider value={innerLiquidityPercentage} onChange={setInnerLiquidityPercentage} />\r\n                    <RowBetween>\r\n                      <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '25')} width=\"20%\">\r\n                        25%\r\n                      </MaxButton>\r\n                      <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '50')} width=\"20%\">\r\n                        50%\r\n                      </MaxButton>\r\n                      <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '75')} width=\"20%\">\r\n                        75%\r\n                      </MaxButton>\r\n                      <MaxButton onClick={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')} width=\"20%\">\r\n                        Max\r\n                      </MaxButton>\r\n                    </RowBetween>\r\n                  </>\r\n                )}\r\n              </AutoColumn>\r\n            </LightCard>\r\n            {!showDetailed && (\r\n              <>\r\n                <ColumnCenter>\r\n                  <ArrowDown size=\"16\" color={theme.text2} />\r\n                </ColumnCenter>\r\n                <LightCard>\r\n                  <AutoColumn gap=\"10px\">\r\n                    <RowBetween>\r\n                      <Text fontSize={24} fontWeight={500}>\r\n                        {formattedAmounts[Field.CURRENCY_A] || '-'}\r\n                      </Text>\r\n                      <RowFixed>\r\n                        <CurrencyLogo currency={currencyA} style={{ marginRight: '12px' }} />\r\n                        <Text fontSize={24} fontWeight={500} id=\"remove-liquidity-tokena-symbol\">\r\n                          {currencyA?.symbol}\r\n                        </Text>\r\n                      </RowFixed>\r\n                    </RowBetween>\r\n                    <RowBetween>\r\n                      <Text fontSize={24} fontWeight={500}>\r\n                        {formattedAmounts[Field.CURRENCY_B] || '-'}\r\n                      </Text>\r\n                      <RowFixed>\r\n                        <CurrencyLogo currency={currencyB} style={{ marginRight: '12px' }} />\r\n                        <Text fontSize={24} fontWeight={500} id=\"remove-liquidity-tokenb-symbol\">\r\n                          {currencyB?.symbol}\r\n                        </Text>\r\n                      </RowFixed>\r\n                    </RowBetween>\r\n                    {chainId && (oneCurrencyIsWETH || oneCurrencyIsETH) ? (\r\n                      <RowBetween style={{ justifyContent: 'flex-end' }}>\r\n                        {oneCurrencyIsETH ? (\r\n                          <StyledInternalLink\r\n                            to={`/remove/${currencyA === ETHER ? WETH[chainId].address : currencyIdA}/${\r\n                              currencyB === ETHER ? WETH[chainId].address : currencyIdB\r\n                            }`}\r\n                          >\r\n                            Receive WETH\r\n                          </StyledInternalLink>\r\n                        ) : oneCurrencyIsWETH ? (\r\n                          <StyledInternalLink\r\n                            to={`/remove/${\r\n                              currencyA && currencyEquals(currencyA, WETH[chainId]) ? 'ETH' : currencyIdA\r\n                            }/${currencyB && currencyEquals(currencyB, WETH[chainId]) ? 'ETH' : currencyIdB}`}\r\n                          >\r\n                            Receive ETH\r\n                          </StyledInternalLink>\r\n                        ) : null}\r\n                      </RowBetween>\r\n                    ) : null}\r\n                  </AutoColumn>\r\n                </LightCard>\r\n              </>\r\n            )}\r\n\r\n            {showDetailed && (\r\n              <>\r\n                <CurrencyInputPanel\r\n                  value={formattedAmounts[Field.LIQUIDITY]}\r\n                  onUserInput={onLiquidityInput}\r\n                  onMax={() => {\r\n                    onUserInput(Field.LIQUIDITY_PERCENT, '100')\r\n                  }}\r\n                  showMaxButton={!atMaxAmount}\r\n                  disableCurrencySelect\r\n                  currency={pair?.liquidityToken}\r\n                  pair={pair}\r\n                  id=\"liquidity-amount\"\r\n                />\r\n                <ColumnCenter>\r\n                  <ArrowDown size=\"16\" color={theme.text2} />\r\n                </ColumnCenter>\r\n                <CurrencyInputPanel\r\n                  hideBalance={true}\r\n                  value={formattedAmounts[Field.CURRENCY_A]}\r\n                  onUserInput={onCurrencyAInput}\r\n                  onMax={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')}\r\n                  showMaxButton={!atMaxAmount}\r\n                  currency={currencyA}\r\n                  label={'Output'}\r\n                  onCurrencySelect={handleSelectCurrencyA}\r\n                  id=\"remove-liquidity-tokena\"\r\n                />\r\n                <ColumnCenter>\r\n                  <Plus size=\"16\" color={theme.text2} />\r\n                </ColumnCenter>\r\n                <CurrencyInputPanel\r\n                  hideBalance={true}\r\n                  value={formattedAmounts[Field.CURRENCY_B]}\r\n                  onUserInput={onCurrencyBInput}\r\n                  onMax={() => onUserInput(Field.LIQUIDITY_PERCENT, '100')}\r\n                  showMaxButton={!atMaxAmount}\r\n                  currency={currencyB}\r\n                  label={'Output'}\r\n                  onCurrencySelect={handleSelectCurrencyB}\r\n                  id=\"remove-liquidity-tokenb\"\r\n                />\r\n              </>\r\n            )}\r\n            {pair && (\r\n              <div style={{ padding: '10px 20px' }}>\r\n                <RowBetween>\r\n                  Price:\r\n                  <div>\r\n                    1 {currencyA?.symbol} = {tokenA ? pair.priceOf(tokenA).toSignificant(6) : '-'} {currencyB?.symbol}\r\n                  </div>\r\n                </RowBetween>\r\n                <RowBetween>\r\n                  <div />\r\n                  <div>\r\n                    1 {currencyB?.symbol} = {tokenB ? pair.priceOf(tokenB).toSignificant(6) : '-'} {currencyA?.symbol}\r\n                  </div>\r\n                </RowBetween>\r\n              </div>\r\n            )}\r\n            <div style={{ position: 'relative' }}>\r\n              {!account ? (\r\n                <ButtonLight onClick={toggleWalletModal}>Connect Wallet</ButtonLight>\r\n              ) : (\r\n                <RowBetween>\r\n                  <ButtonConfirmed\r\n                    onClick={onAttemptToApprove}\r\n                    confirmed={approval === ApprovalState.APPROVED || signatureData !== null}\r\n                    disabled={approval !== ApprovalState.NOT_APPROVED || signatureData !== null}\r\n                    mr=\"0.5rem\"\r\n                    fontWeight={500}\r\n                    fontSize={16}\r\n                  >\r\n                    {approval === ApprovalState.PENDING ? (\r\n                      <Dots>Approving</Dots>\r\n                    ) : approval === ApprovalState.APPROVED || signatureData !== null ? (\r\n                      'Approved'\r\n                    ) : (\r\n                      'Approve'\r\n                    )}\r\n                  </ButtonConfirmed>\r\n                  <ButtonError\r\n                    onClick={() => {\r\n                      setShowConfirm(true)\r\n                    }}\r\n                    disabled={!isValid || (signatureData === null && approval !== ApprovalState.APPROVED)}\r\n                    error={!isValid && !!parsedAmounts[Field.CURRENCY_A] && !!parsedAmounts[Field.CURRENCY_B]}\r\n                  >\r\n                    <Text fontSize={16} fontWeight={500}>\r\n                      {error || 'Remove'}\r\n                    </Text>\r\n                  </ButtonError>\r\n                </RowBetween>\r\n              )}\r\n            </div>\r\n          </AutoColumn>\r\n        </Wrapper>\r\n      </AppBody>\r\n\r\n      {pair ? (\r\n        <AutoColumn style={{ minWidth: '20rem', width: '100%', maxWidth: '400px', marginTop: '1rem' }}>\r\n          <MinimalPositionCard showUnwrapped={oneCurrencyIsWETH} pair={pair} />\r\n        </AutoColumn>\r\n      ) : null}\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}