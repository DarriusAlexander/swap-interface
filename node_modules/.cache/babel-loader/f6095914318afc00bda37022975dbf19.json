{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:\\\\Users\\\\Darrius\\\\Documents\\\\GitHub\\\\swap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  padding: 1rem;\\n  height: 100%;\\n  overflow: auto;\\n  padding-bottom: 80px;\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n  transition: 200ms;\\n  align-items: center;\\n  padding: 1rem;\\n  border-radius: 20px;\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  color: \",\";\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  font-size: 16px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  font-weight: 600;\\n  color: \",\";\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  position: relative;\\n  border: none;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  z-index: 100;\\n  visibility: \",\";\\n  opacity: \",\";\\n  transition: visibility 150ms linear, opacity 150ms linear;\\n  background: \",\";\\n  border: 1px solid \",\";\\n  box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.01), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04),\\n    0px 24px 32px rgba(0, 0, 0, 0.01);\\n  color: \",\";\\n  border-radius: 0.5rem;\\n  padding: 1rem;\\n  display: grid;\\n  grid-template-rows: 1fr;\\n  grid-gap: 8px;\\n  font-size: 1rem;\\n  text-align: left;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  padding: 0;\\n  font-size: 1rem;\\n  opacity: \",\";\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{memo,useCallback,useMemo,useRef,useState,useEffect}from'react';import{Settings,CheckCircle}from'react-feather';import ReactGA from'react-ga';import{usePopper}from'react-popper';import{useDispatch,useSelector}from'react-redux';import styled from'styled-components';import{useFetchListCallback}from'../../hooks/useFetchListCallback';import{useOnClickOutside}from'../../hooks/useOnClickOutside';import useToggle from'../../hooks/useToggle';import{acceptListUpdate,removeList,disableList,enableList}from'../../state/lists/actions';import{useIsListActive,useAllLists,useActiveListUrls}from'../../state/lists/hooks';import{ExternalLink,LinkStyledButton,TYPE,IconWrapper}from'../../theme';import listVersionLabel from'../../utils/listVersionLabel';import{parseENSAddress}from'../../utils/parseENSAddress';import uriToHttp from'../../utils/uriToHttp';import{ButtonEmpty,ButtonPrimary}from'../Button';import Column,{AutoColumn}from'../Column';import ListLogo from'../ListLogo';import Row,{RowFixed,RowBetween}from'../Row';import{PaddedColumn,SearchInput,Separator,SeparatorDark}from'./styleds';import{useListColor}from'hooks/useColor';import useTheme from'../../hooks/useTheme';import ListToggle from'../Toggle/ListToggle';import Card from'components/Card';import{CurrencyModalView}from'./CurrencySearchModal';import{UNSUPPORTED_LIST_URLS}from'constants/lists';var Wrapper=styled(Column)(_templateObject());var UnpaddedLinkStyledButton=styled(LinkStyledButton)(_templateObject2(),function(_ref){var disabled=_ref.disabled;return disabled?'0.4':'1';});var PopoverContainer=styled.div(_templateObject3(),function(props){return props.show?'visible':'hidden';},function(props){return props.show?1:0;},function(_ref2){var theme=_ref2.theme;return theme.bg2;},function(_ref3){var theme=_ref3.theme;return theme.bg3;},function(_ref4){var theme=_ref4.theme;return theme.text2;});var StyledMenu=styled.div(_templateObject4());var StyledTitleText=styled.div(_templateObject5(),function(_ref5){var theme=_ref5.theme,active=_ref5.active;return active?theme.white:theme.text2;});var StyledListUrlText=styled(TYPE.main)(_templateObject6(),function(_ref6){var theme=_ref6.theme,active=_ref6.active;return active?theme.white:theme.text2;});var RowWrapper=styled(Row)(_templateObject7(),function(_ref7){var bgColor=_ref7.bgColor,active=_ref7.active,theme=_ref7.theme;return active?bgColor!==null&&bgColor!==void 0?bgColor:'transparent':theme.bg2;});function listUrlRowHTMLId(listUrl){return\"list-row-\".concat(listUrl.replace(/\\./g,'-'));}var ListRow=memo(function ListRow(_ref8){var listUrl=_ref8.listUrl;var listsByUrl=useSelector(function(state){return state.lists.byUrl;});var dispatch=useDispatch();var _listsByUrl$listUrl=listsByUrl[listUrl],list=_listsByUrl$listUrl.current,pending=_listsByUrl$listUrl.pendingUpdate;var theme=useTheme();var listColor=useListColor(list===null||list===void 0?void 0:list.logoURI);var isActive=useIsListActive(listUrl);var _useToggle=useToggle(false),_useToggle2=_slicedToArray(_useToggle,2),open=_useToggle2[0],toggle=_useToggle2[1];var node=useRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),referenceElement=_useState2[0],setReferenceElement=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),popperElement=_useState4[0],setPopperElement=_useState4[1];var _usePopper=usePopper(referenceElement,popperElement,{placement:'auto',strategy:'fixed',modifiers:[{name:'offset',options:{offset:[8,8]}}]}),styles=_usePopper.styles,attributes=_usePopper.attributes;useOnClickOutside(node,open?toggle:undefined);var handleAcceptListUpdate=useCallback(function(){if(!pending)return;ReactGA.event({category:'Lists',action:'Update List from List Select',label:listUrl});dispatch(acceptListUpdate(listUrl));},[dispatch,listUrl,pending]);var handleRemoveList=useCallback(function(){ReactGA.event({category:'Lists',action:'Start Remove List',label:listUrl});if(window.prompt(\"Please confirm you would like to remove this list by typing REMOVE\")===\"REMOVE\"){ReactGA.event({category:'Lists',action:'Confirm Remove List',label:listUrl});dispatch(removeList(listUrl));}},[dispatch,listUrl]);var handleEnableList=useCallback(function(){ReactGA.event({category:'Lists',action:'Enable List',label:listUrl});dispatch(enableList(listUrl));},[dispatch,listUrl]);var handleDisableList=useCallback(function(){ReactGA.event({category:'Lists',action:'Disable List',label:listUrl});dispatch(disableList(listUrl));},[dispatch,listUrl]);if(!list)return null;return/*#__PURE__*/React.createElement(RowWrapper,{active:isActive,bgColor:listColor,key:listUrl,id:listUrlRowHTMLId(listUrl)},list.logoURI?/*#__PURE__*/React.createElement(ListLogo,{size:\"40px\",style:{marginRight:'1rem'},logoURI:list.logoURI,alt:\"\".concat(list.name,\" list logo\")}):/*#__PURE__*/React.createElement(\"div\",{style:{width:'24px',height:'24px',marginRight:'1rem'}}),/*#__PURE__*/React.createElement(Column,{style:{flex:'1'}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(StyledTitleText,{active:isActive},list.name)),/*#__PURE__*/React.createElement(RowFixed,{mt:\"4px\"},/*#__PURE__*/React.createElement(StyledListUrlText,{active:isActive,mr:\"6px\"},list.tokens.length,\" tokens\"),/*#__PURE__*/React.createElement(StyledMenu,{ref:node},/*#__PURE__*/React.createElement(ButtonEmpty,{onClick:toggle,ref:setReferenceElement,padding:\"0\"},/*#__PURE__*/React.createElement(Settings,{stroke:isActive?theme.bg1:theme.text1,size:12})),open&&/*#__PURE__*/React.createElement(PopoverContainer,Object.assign({show:true,ref:setPopperElement,style:styles.popper},attributes.popper),/*#__PURE__*/React.createElement(\"div\",null,list&&listVersionLabel(list.version)),/*#__PURE__*/React.createElement(SeparatorDark,null),/*#__PURE__*/React.createElement(ExternalLink,{href:\"https://tokenlists.org/token-list?url=\".concat(listUrl)},\"View list\"),/*#__PURE__*/React.createElement(UnpaddedLinkStyledButton,{onClick:handleRemoveList,disabled:Object.keys(listsByUrl).length===1},\"Remove list\"),pending&&/*#__PURE__*/React.createElement(UnpaddedLinkStyledButton,{onClick:handleAcceptListUpdate},\"Update list\"))))),/*#__PURE__*/React.createElement(ListToggle,{isActive:isActive,bgColor:listColor,toggle:function toggle(){isActive?handleDisableList():handleEnableList();}}));});var ListContainer=styled.div(_templateObject8());export function ManageLists(_ref9){var setModalView=_ref9.setModalView,setImportList=_ref9.setImportList,setListUrl=_ref9.setListUrl;var theme=useTheme();var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),listUrlInput=_useState6[0],setListUrlInput=_useState6[1];var lists=useAllLists();// sort by active but only if not visible\nvar activeListUrls=useActiveListUrls();var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),activeCopy=_useState8[0],setActiveCopy=_useState8[1];useEffect(function(){if(!activeCopy&&activeListUrls){setActiveCopy(activeListUrls);}},[activeCopy,activeListUrls]);var handleInput=useCallback(function(e){setListUrlInput(e.target.value);},[]);var fetchList=useFetchListCallback();var validUrl=useMemo(function(){return uriToHttp(listUrlInput).length>0||Boolean(parseENSAddress(listUrlInput));},[listUrlInput]);var sortedLists=useMemo(function(){var listUrls=Object.keys(lists);return listUrls.filter(function(listUrl){// only show loaded lists, hide unsupported lists\nreturn Boolean(lists[listUrl].current)&&!Boolean(UNSUPPORTED_LIST_URLS.includes(listUrl));}).sort(function(u1,u2){var l1=lists[u1].current;var l2=lists[u2].current;// first filter on active lists\nif((activeCopy===null||activeCopy===void 0?void 0:activeCopy.includes(u1))&&!(activeCopy===null||activeCopy===void 0?void 0:activeCopy.includes(u2))){return-1;}if(!(activeCopy===null||activeCopy===void 0?void 0:activeCopy.includes(u1))&&(activeCopy===null||activeCopy===void 0?void 0:activeCopy.includes(u2))){return 1;}if(l1&&l2){return l1.name.toLowerCase()<l2.name.toLowerCase()?-1:l1.name.toLowerCase()===l2.name.toLowerCase()?0:1;}if(l1)return-1;if(l2)return 1;return 0;});},[lists,activeCopy]);// temporary fetched list for import flow\nvar _useState9=useState(),_useState10=_slicedToArray(_useState9,2),tempList=_useState10[0],setTempList=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),addError=_useState12[0],setAddError=_useState12[1];useEffect(function(){function fetchTempList(){return _fetchTempList.apply(this,arguments);}// if valid url, fetch details for card\nfunction _fetchTempList(){_fetchTempList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetchList(listUrlInput,false).then(function(list){return setTempList(list);}).catch(function(){return setAddError('Error importing list');});case 1:case\"end\":return _context.stop();}}},_callee);}));return _fetchTempList.apply(this,arguments);}if(validUrl){fetchTempList();}else{setTempList(undefined);listUrlInput!==''&&setAddError('Enter valid list location');}// reset error\nif(listUrlInput===''){setAddError(undefined);}},[fetchList,listUrlInput,validUrl]);// check if list is already imported\nvar isImported=Object.keys(lists).includes(listUrlInput);// set list values and have parent modal switch to import list view\nvar handleImport=useCallback(function(){if(!tempList)return;setImportList(tempList);setModalView(CurrencyModalView.importList);setListUrl(listUrlInput);},[listUrlInput,setImportList,setListUrl,setModalView,tempList]);return/*#__PURE__*/React.createElement(Wrapper,null,/*#__PURE__*/React.createElement(PaddedColumn,{gap:\"14px\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(SearchInput,{type:\"text\",id:\"list-add-input\",placeholder:\"https:// or ipfs:// or ENS name\",value:listUrlInput,onChange:handleInput})),addError?/*#__PURE__*/React.createElement(TYPE.error,{title:addError,style:{textOverflow:'ellipsis',overflow:'hidden'},error:true},addError):null),tempList&&/*#__PURE__*/React.createElement(PaddedColumn,{style:{paddingTop:0}},/*#__PURE__*/React.createElement(Card,{backgroundColor:theme.bg2,padding:\"12px 20px\"},/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(RowFixed,null,tempList.logoURI&&/*#__PURE__*/React.createElement(ListLogo,{logoURI:tempList.logoURI,size:\"40px\"}),/*#__PURE__*/React.createElement(AutoColumn,{gap:\"4px\",style:{marginLeft:'20px'}},/*#__PURE__*/React.createElement(TYPE.body,{fontWeight:600},tempList.name),/*#__PURE__*/React.createElement(TYPE.main,{fontSize:'12px'},tempList.tokens.length,\" tokens\"))),isImported?/*#__PURE__*/React.createElement(RowFixed,null,/*#__PURE__*/React.createElement(IconWrapper,{stroke:theme.text2,size:\"16px\",marginRight:'10px'},/*#__PURE__*/React.createElement(CheckCircle,null)),/*#__PURE__*/React.createElement(TYPE.body,{color:theme.text2},\"Loaded\")):/*#__PURE__*/React.createElement(ButtonPrimary,{style:{fontSize:'14px'},padding:\"6px 8px\",width:\"fit-content\",onClick:handleImport},\"Import\")))),/*#__PURE__*/React.createElement(Separator,null),/*#__PURE__*/React.createElement(ListContainer,null,/*#__PURE__*/React.createElement(AutoColumn,{gap:\"md\"},sortedLists.map(function(listUrl){return/*#__PURE__*/React.createElement(ListRow,{key:listUrl,listUrl:listUrl});}))));}","map":{"version":3,"sources":["C:/Users/Darrius/Documents/GitHub/swap-interface/src/components/SearchModal/ManageLists.tsx"],"names":["React","memo","useCallback","useMemo","useRef","useState","useEffect","Settings","CheckCircle","ReactGA","usePopper","useDispatch","useSelector","styled","useFetchListCallback","useOnClickOutside","useToggle","acceptListUpdate","removeList","disableList","enableList","useIsListActive","useAllLists","useActiveListUrls","ExternalLink","LinkStyledButton","TYPE","IconWrapper","listVersionLabel","parseENSAddress","uriToHttp","ButtonEmpty","ButtonPrimary","Column","AutoColumn","ListLogo","Row","RowFixed","RowBetween","PaddedColumn","SearchInput","Separator","SeparatorDark","useListColor","useTheme","ListToggle","Card","CurrencyModalView","UNSUPPORTED_LIST_URLS","Wrapper","UnpaddedLinkStyledButton","disabled","PopoverContainer","div","props","show","theme","bg2","bg3","text2","StyledMenu","StyledTitleText","active","white","StyledListUrlText","main","RowWrapper","bgColor","listUrlRowHTMLId","listUrl","replace","ListRow","listsByUrl","state","lists","byUrl","dispatch","list","current","pending","pendingUpdate","listColor","logoURI","isActive","open","toggle","node","referenceElement","setReferenceElement","popperElement","setPopperElement","placement","strategy","modifiers","name","options","offset","styles","attributes","undefined","handleAcceptListUpdate","event","category","action","label","handleRemoveList","window","prompt","handleEnableList","handleDisableList","marginRight","width","height","flex","tokens","length","bg1","text1","popper","version","Object","keys","ListContainer","ManageLists","setModalView","setImportList","setListUrl","listUrlInput","setListUrlInput","activeListUrls","activeCopy","setActiveCopy","handleInput","e","target","value","fetchList","validUrl","Boolean","sortedLists","listUrls","filter","includes","sort","u1","u2","l1","l2","toLowerCase","tempList","setTempList","addError","setAddError","fetchTempList","then","catch","isImported","handleImport","importList","textOverflow","overflow","paddingTop","marginLeft","fontSize","map"],"mappings":"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","sourcesContent":["import React, { memo, useCallback, useMemo, useRef, useState, useEffect } from 'react'\r\nimport { Settings, CheckCircle } from 'react-feather'\r\nimport ReactGA from 'react-ga'\r\nimport { usePopper } from 'react-popper'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport styled from 'styled-components'\r\nimport { useFetchListCallback } from '../../hooks/useFetchListCallback'\r\nimport { useOnClickOutside } from '../../hooks/useOnClickOutside'\r\nimport { TokenList } from '@uniswap/token-lists'\r\n\r\nimport useToggle from '../../hooks/useToggle'\r\nimport { AppDispatch, AppState } from '../../state'\r\nimport { acceptListUpdate, removeList, disableList, enableList } from '../../state/lists/actions'\r\nimport { useIsListActive, useAllLists, useActiveListUrls } from '../../state/lists/hooks'\r\nimport { ExternalLink, LinkStyledButton, TYPE, IconWrapper } from '../../theme'\r\nimport listVersionLabel from '../../utils/listVersionLabel'\r\nimport { parseENSAddress } from '../../utils/parseENSAddress'\r\nimport uriToHttp from '../../utils/uriToHttp'\r\nimport { ButtonEmpty, ButtonPrimary } from '../Button'\r\n\r\nimport Column, { AutoColumn } from '../Column'\r\nimport ListLogo from '../ListLogo'\r\nimport Row, { RowFixed, RowBetween } from '../Row'\r\nimport { PaddedColumn, SearchInput, Separator, SeparatorDark } from './styleds'\r\nimport { useListColor } from 'hooks/useColor'\r\nimport useTheme from '../../hooks/useTheme'\r\nimport ListToggle from '../Toggle/ListToggle'\r\nimport Card from 'components/Card'\r\nimport { CurrencyModalView } from './CurrencySearchModal'\r\nimport { UNSUPPORTED_LIST_URLS } from 'constants/lists'\r\n\r\nconst Wrapper = styled(Column)`\r\n  width: 100%;\r\n  height: 100%;\r\n`\r\n\r\nconst UnpaddedLinkStyledButton = styled(LinkStyledButton)`\r\n  padding: 0;\r\n  font-size: 1rem;\r\n  opacity: ${({ disabled }) => (disabled ? '0.4' : '1')};\r\n`\r\n\r\nconst PopoverContainer = styled.div<{ show: boolean }>`\r\n  z-index: 100;\r\n  visibility: ${props => (props.show ? 'visible' : 'hidden')};\r\n  opacity: ${props => (props.show ? 1 : 0)};\r\n  transition: visibility 150ms linear, opacity 150ms linear;\r\n  background: ${({ theme }) => theme.bg2};\r\n  border: 1px solid ${({ theme }) => theme.bg3};\r\n  box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.01), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04),\r\n    0px 24px 32px rgba(0, 0, 0, 0.01);\r\n  color: ${({ theme }) => theme.text2};\r\n  border-radius: 0.5rem;\r\n  padding: 1rem;\r\n  display: grid;\r\n  grid-template-rows: 1fr;\r\n  grid-gap: 8px;\r\n  font-size: 1rem;\r\n  text-align: left;\r\n`\r\n\r\nconst StyledMenu = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: relative;\r\n  border: none;\r\n`\r\n\r\nconst StyledTitleText = styled.div<{ active: boolean }>`\r\n  font-size: 16px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-weight: 600;\r\n  color: ${({ theme, active }) => (active ? theme.white : theme.text2)};\r\n`\r\n\r\nconst StyledListUrlText = styled(TYPE.main)<{ active: boolean }>`\r\n  font-size: 12px;\r\n  color: ${({ theme, active }) => (active ? theme.white : theme.text2)};\r\n`\r\n\r\nconst RowWrapper = styled(Row)<{ bgColor: string; active: boolean }>`\r\n  background-color: ${({ bgColor, active, theme }) => (active ? bgColor ?? 'transparent' : theme.bg2)};\r\n  transition: 200ms;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  border-radius: 20px;\r\n`\r\n\r\nfunction listUrlRowHTMLId(listUrl: string) {\r\n  return `list-row-${listUrl.replace(/\\./g, '-')}`\r\n}\r\n\r\nconst ListRow = memo(function ListRow({ listUrl }: { listUrl: string }) {\r\n  const listsByUrl = useSelector<AppState, AppState['lists']['byUrl']>(state => state.lists.byUrl)\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const { current: list, pendingUpdate: pending } = listsByUrl[listUrl]\r\n\r\n  const theme = useTheme()\r\n  const listColor = useListColor(list?.logoURI)\r\n  const isActive = useIsListActive(listUrl)\r\n\r\n  const [open, toggle] = useToggle(false)\r\n  const node = useRef<HTMLDivElement>()\r\n  const [referenceElement, setReferenceElement] = useState<HTMLDivElement>()\r\n  const [popperElement, setPopperElement] = useState<HTMLDivElement>()\r\n\r\n  const { styles, attributes } = usePopper(referenceElement, popperElement, {\r\n    placement: 'auto',\r\n    strategy: 'fixed',\r\n    modifiers: [{ name: 'offset', options: { offset: [8, 8] } }]\r\n  })\r\n\r\n  useOnClickOutside(node, open ? toggle : undefined)\r\n\r\n  const handleAcceptListUpdate = useCallback(() => {\r\n    if (!pending) return\r\n    ReactGA.event({\r\n      category: 'Lists',\r\n      action: 'Update List from List Select',\r\n      label: listUrl\r\n    })\r\n    dispatch(acceptListUpdate(listUrl))\r\n  }, [dispatch, listUrl, pending])\r\n\r\n  const handleRemoveList = useCallback(() => {\r\n    ReactGA.event({\r\n      category: 'Lists',\r\n      action: 'Start Remove List',\r\n      label: listUrl\r\n    })\r\n    if (window.prompt(`Please confirm you would like to remove this list by typing REMOVE`) === `REMOVE`) {\r\n      ReactGA.event({\r\n        category: 'Lists',\r\n        action: 'Confirm Remove List',\r\n        label: listUrl\r\n      })\r\n      dispatch(removeList(listUrl))\r\n    }\r\n  }, [dispatch, listUrl])\r\n\r\n  const handleEnableList = useCallback(() => {\r\n    ReactGA.event({\r\n      category: 'Lists',\r\n      action: 'Enable List',\r\n      label: listUrl\r\n    })\r\n    dispatch(enableList(listUrl))\r\n  }, [dispatch, listUrl])\r\n\r\n  const handleDisableList = useCallback(() => {\r\n    ReactGA.event({\r\n      category: 'Lists',\r\n      action: 'Disable List',\r\n      label: listUrl\r\n    })\r\n    dispatch(disableList(listUrl))\r\n  }, [dispatch, listUrl])\r\n\r\n  if (!list) return null\r\n\r\n  return (\r\n    <RowWrapper active={isActive} bgColor={listColor} key={listUrl} id={listUrlRowHTMLId(listUrl)}>\r\n      {list.logoURI ? (\r\n        <ListLogo size=\"40px\" style={{ marginRight: '1rem' }} logoURI={list.logoURI} alt={`${list.name} list logo`} />\r\n      ) : (\r\n        <div style={{ width: '24px', height: '24px', marginRight: '1rem' }} />\r\n      )}\r\n      <Column style={{ flex: '1' }}>\r\n        <Row>\r\n          <StyledTitleText active={isActive}>{list.name}</StyledTitleText>\r\n        </Row>\r\n        <RowFixed mt=\"4px\">\r\n          <StyledListUrlText active={isActive} mr=\"6px\">\r\n            {list.tokens.length} tokens\r\n          </StyledListUrlText>\r\n          <StyledMenu ref={node as any}>\r\n            <ButtonEmpty onClick={toggle} ref={setReferenceElement} padding=\"0\">\r\n              <Settings stroke={isActive ? theme.bg1 : theme.text1} size={12} />\r\n            </ButtonEmpty>\r\n            {open && (\r\n              <PopoverContainer show={true} ref={setPopperElement as any} style={styles.popper} {...attributes.popper}>\r\n                <div>{list && listVersionLabel(list.version)}</div>\r\n                <SeparatorDark />\r\n                <ExternalLink href={`https://tokenlists.org/token-list?url=${listUrl}`}>View list</ExternalLink>\r\n                <UnpaddedLinkStyledButton onClick={handleRemoveList} disabled={Object.keys(listsByUrl).length === 1}>\r\n                  Remove list\r\n                </UnpaddedLinkStyledButton>\r\n                {pending && (\r\n                  <UnpaddedLinkStyledButton onClick={handleAcceptListUpdate}>Update list</UnpaddedLinkStyledButton>\r\n                )}\r\n              </PopoverContainer>\r\n            )}\r\n          </StyledMenu>\r\n        </RowFixed>\r\n      </Column>\r\n      <ListToggle\r\n        isActive={isActive}\r\n        bgColor={listColor}\r\n        toggle={() => {\r\n          isActive ? handleDisableList() : handleEnableList()\r\n        }}\r\n      />\r\n    </RowWrapper>\r\n  )\r\n})\r\n\r\nconst ListContainer = styled.div`\r\n  padding: 1rem;\r\n  height: 100%;\r\n  overflow: auto;\r\n  padding-bottom: 80px;\r\n`\r\n\r\nexport function ManageLists({\r\n  setModalView,\r\n  setImportList,\r\n  setListUrl\r\n}: {\r\n  setModalView: (view: CurrencyModalView) => void\r\n  setImportList: (list: TokenList) => void\r\n  setListUrl: (url: string) => void\r\n}) {\r\n  const theme = useTheme()\r\n\r\n  const [listUrlInput, setListUrlInput] = useState<string>('')\r\n\r\n  const lists = useAllLists()\r\n\r\n  // sort by active but only if not visible\r\n  const activeListUrls = useActiveListUrls()\r\n  const [activeCopy, setActiveCopy] = useState<string[] | undefined>()\r\n  useEffect(() => {\r\n    if (!activeCopy && activeListUrls) {\r\n      setActiveCopy(activeListUrls)\r\n    }\r\n  }, [activeCopy, activeListUrls])\r\n\r\n  const handleInput = useCallback(e => {\r\n    setListUrlInput(e.target.value)\r\n  }, [])\r\n\r\n  const fetchList = useFetchListCallback()\r\n\r\n  const validUrl: boolean = useMemo(() => {\r\n    return uriToHttp(listUrlInput).length > 0 || Boolean(parseENSAddress(listUrlInput))\r\n  }, [listUrlInput])\r\n\r\n  const sortedLists = useMemo(() => {\r\n    const listUrls = Object.keys(lists)\r\n    return listUrls\r\n      .filter(listUrl => {\r\n        // only show loaded lists, hide unsupported lists\r\n        return Boolean(lists[listUrl].current) && !Boolean(UNSUPPORTED_LIST_URLS.includes(listUrl))\r\n      })\r\n      .sort((u1, u2) => {\r\n        const { current: l1 } = lists[u1]\r\n        const { current: l2 } = lists[u2]\r\n\r\n        // first filter on active lists\r\n        if (activeCopy?.includes(u1) && !activeCopy?.includes(u2)) {\r\n          return -1\r\n        }\r\n        if (!activeCopy?.includes(u1) && activeCopy?.includes(u2)) {\r\n          return 1\r\n        }\r\n\r\n        if (l1 && l2) {\r\n          return l1.name.toLowerCase() < l2.name.toLowerCase()\r\n            ? -1\r\n            : l1.name.toLowerCase() === l2.name.toLowerCase()\r\n            ? 0\r\n            : 1\r\n        }\r\n        if (l1) return -1\r\n        if (l2) return 1\r\n        return 0\r\n      })\r\n  }, [lists, activeCopy])\r\n\r\n  // temporary fetched list for import flow\r\n  const [tempList, setTempList] = useState<TokenList>()\r\n  const [addError, setAddError] = useState<string | undefined>()\r\n\r\n  useEffect(() => {\r\n    async function fetchTempList() {\r\n      fetchList(listUrlInput, false)\r\n        .then(list => setTempList(list))\r\n        .catch(() => setAddError('Error importing list'))\r\n    }\r\n    // if valid url, fetch details for card\r\n    if (validUrl) {\r\n      fetchTempList()\r\n    } else {\r\n      setTempList(undefined)\r\n      listUrlInput !== '' && setAddError('Enter valid list location')\r\n    }\r\n\r\n    // reset error\r\n    if (listUrlInput === '') {\r\n      setAddError(undefined)\r\n    }\r\n  }, [fetchList, listUrlInput, validUrl])\r\n\r\n  // check if list is already imported\r\n  const isImported = Object.keys(lists).includes(listUrlInput)\r\n\r\n  // set list values and have parent modal switch to import list view\r\n  const handleImport = useCallback(() => {\r\n    if (!tempList) return\r\n    setImportList(tempList)\r\n    setModalView(CurrencyModalView.importList)\r\n    setListUrl(listUrlInput)\r\n  }, [listUrlInput, setImportList, setListUrl, setModalView, tempList])\r\n\r\n  return (\r\n    <Wrapper>\r\n      <PaddedColumn gap=\"14px\">\r\n        <Row>\r\n          <SearchInput\r\n            type=\"text\"\r\n            id=\"list-add-input\"\r\n            placeholder=\"https:// or ipfs:// or ENS name\"\r\n            value={listUrlInput}\r\n            onChange={handleInput}\r\n          />\r\n        </Row>\r\n        {addError ? (\r\n          <TYPE.error title={addError} style={{ textOverflow: 'ellipsis', overflow: 'hidden' }} error>\r\n            {addError}\r\n          </TYPE.error>\r\n        ) : null}\r\n      </PaddedColumn>\r\n      {tempList && (\r\n        <PaddedColumn style={{ paddingTop: 0 }}>\r\n          <Card backgroundColor={theme.bg2} padding=\"12px 20px\">\r\n            <RowBetween>\r\n              <RowFixed>\r\n                {tempList.logoURI && <ListLogo logoURI={tempList.logoURI} size=\"40px\" />}\r\n                <AutoColumn gap=\"4px\" style={{ marginLeft: '20px' }}>\r\n                  <TYPE.body fontWeight={600}>{tempList.name}</TYPE.body>\r\n                  <TYPE.main fontSize={'12px'}>{tempList.tokens.length} tokens</TYPE.main>\r\n                </AutoColumn>\r\n              </RowFixed>\r\n              {isImported ? (\r\n                <RowFixed>\r\n                  <IconWrapper stroke={theme.text2} size=\"16px\" marginRight={'10px'}>\r\n                    <CheckCircle />\r\n                  </IconWrapper>\r\n                  <TYPE.body color={theme.text2}>Loaded</TYPE.body>\r\n                </RowFixed>\r\n              ) : (\r\n                <ButtonPrimary\r\n                  style={{ fontSize: '14px' }}\r\n                  padding=\"6px 8px\"\r\n                  width=\"fit-content\"\r\n                  onClick={handleImport}\r\n                >\r\n                  Import\r\n                </ButtonPrimary>\r\n              )}\r\n            </RowBetween>\r\n          </Card>\r\n        </PaddedColumn>\r\n      )}\r\n      <Separator />\r\n      <ListContainer>\r\n        <AutoColumn gap=\"md\">\r\n          {sortedLists.map(listUrl => (\r\n            <ListRow key={listUrl} listUrl={listUrl} />\r\n          ))}\r\n        </AutoColumn>\r\n      </ListContainer>\r\n    </Wrapper>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}