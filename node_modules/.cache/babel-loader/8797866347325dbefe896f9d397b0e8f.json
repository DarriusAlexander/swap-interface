{"ast":null,"code":"import{MaxUint256}from'@ethersproject/constants';import{ETHER,Token,TradeType}from'@uniswap/sdk';import{getTradeVersion}from'../data/V1';import{Version}from'../hooks/useToggledVersion';function toHex(currencyAmount){return\"0x\".concat(currencyAmount.raw.toString(16));}/**\r\n * Get the arguments to make for a swap\r\n * @param trade trade to get v1 arguments for swapping\r\n * @param options options for swapping\r\n */export default function v1SwapArguments(trade,options){if(getTradeVersion(trade)!==Version.v1){throw new Error('invalid trade version');}if(trade.route.pairs.length>2){throw new Error('too many pairs');}var isExactIn=trade.tradeType===TradeType.EXACT_INPUT;var inputETH=trade.inputAmount.currency===ETHER;var outputETH=trade.outputAmount.currency===ETHER;if(inputETH&&outputETH)throw new Error('ETHER to ETHER');var minimumAmountOut=toHex(trade.minimumAmountOut(options.allowedSlippage));var maximumAmountIn=toHex(trade.maximumAmountIn(options.allowedSlippage));var deadline=\"0x\".concat(options.deadline.toString(16));if(isExactIn){if(inputETH){return{methodName:'ethToTokenTransferInput',args:[minimumAmountOut,deadline,options.recipient],value:maximumAmountIn};}else if(outputETH){return{methodName:'tokenToEthTransferInput',args:[maximumAmountIn,minimumAmountOut,deadline,options.recipient],value:'0x0'};}else{var outputToken=trade.outputAmount.currency;// should never happen, needed for type check\nif(!(outputToken instanceof Token)){throw new Error('token to token');}return{methodName:'tokenToTokenTransferInput',args:[maximumAmountIn,minimumAmountOut,'0x1',deadline,options.recipient,outputToken.address],value:'0x0'};}}else{if(inputETH){return{methodName:'ethToTokenTransferOutput',args:[minimumAmountOut,deadline,options.recipient],value:maximumAmountIn};}else if(outputETH){return{methodName:'tokenToEthTransferOutput',args:[minimumAmountOut,maximumAmountIn,deadline,options.recipient],value:'0x0'};}else{var output=trade.outputAmount.currency;if(!(output instanceof Token)){throw new Error('invalid output amount currency');}return{methodName:'tokenToTokenTransferOutput',args:[minimumAmountOut,maximumAmountIn,MaxUint256.toHexString(),deadline,options.recipient,output.address],value:'0x0'};}}}","map":{"version":3,"sources":["C:/Users/Darrius/Documents/GitHub/swap-interface/src/utils/v1SwapArguments.ts"],"names":["MaxUint256","ETHER","Token","TradeType","getTradeVersion","Version","toHex","currencyAmount","raw","toString","v1SwapArguments","trade","options","v1","Error","route","pairs","length","isExactIn","tradeType","EXACT_INPUT","inputETH","inputAmount","currency","outputETH","outputAmount","minimumAmountOut","allowedSlippage","maximumAmountIn","deadline","methodName","args","recipient","value","outputToken","address","output","toHexString"],"mappings":"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","sourcesContent":["import { MaxUint256 } from '@ethersproject/constants'\r\nimport { CurrencyAmount, ETHER, SwapParameters, Token, Trade, TradeOptionsDeadline, TradeType } from '@uniswap/sdk'\r\nimport { getTradeVersion } from '../data/V1'\r\nimport { Version } from '../hooks/useToggledVersion'\r\n\r\nfunction toHex(currencyAmount: CurrencyAmount): string {\r\n  return `0x${currencyAmount.raw.toString(16)}`\r\n}\r\n\r\n/**\r\n * Get the arguments to make for a swap\r\n * @param trade trade to get v1 arguments for swapping\r\n * @param options options for swapping\r\n */\r\nexport default function v1SwapArguments(\r\n  trade: Trade,\r\n  options: Omit<TradeOptionsDeadline, 'feeOnTransfer'>\r\n): SwapParameters {\r\n  if (getTradeVersion(trade) !== Version.v1) {\r\n    throw new Error('invalid trade version')\r\n  }\r\n  if (trade.route.pairs.length > 2) {\r\n    throw new Error('too many pairs')\r\n  }\r\n  const isExactIn = trade.tradeType === TradeType.EXACT_INPUT\r\n  const inputETH = trade.inputAmount.currency === ETHER\r\n  const outputETH = trade.outputAmount.currency === ETHER\r\n  if (inputETH && outputETH) throw new Error('ETHER to ETHER')\r\n  const minimumAmountOut = toHex(trade.minimumAmountOut(options.allowedSlippage))\r\n  const maximumAmountIn = toHex(trade.maximumAmountIn(options.allowedSlippage))\r\n  const deadline = `0x${options.deadline.toString(16)}`\r\n  if (isExactIn) {\r\n    if (inputETH) {\r\n      return {\r\n        methodName: 'ethToTokenTransferInput',\r\n        args: [minimumAmountOut, deadline, options.recipient],\r\n        value: maximumAmountIn\r\n      }\r\n    } else if (outputETH) {\r\n      return {\r\n        methodName: 'tokenToEthTransferInput',\r\n        args: [maximumAmountIn, minimumAmountOut, deadline, options.recipient],\r\n        value: '0x0'\r\n      }\r\n    } else {\r\n      const outputToken = trade.outputAmount.currency\r\n      // should never happen, needed for type check\r\n      if (!(outputToken instanceof Token)) {\r\n        throw new Error('token to token')\r\n      }\r\n      return {\r\n        methodName: 'tokenToTokenTransferInput',\r\n        args: [maximumAmountIn, minimumAmountOut, '0x1', deadline, options.recipient, outputToken.address],\r\n        value: '0x0'\r\n      }\r\n    }\r\n  } else {\r\n    if (inputETH) {\r\n      return {\r\n        methodName: 'ethToTokenTransferOutput',\r\n        args: [minimumAmountOut, deadline, options.recipient],\r\n        value: maximumAmountIn\r\n      }\r\n    } else if (outputETH) {\r\n      return {\r\n        methodName: 'tokenToEthTransferOutput',\r\n        args: [minimumAmountOut, maximumAmountIn, deadline, options.recipient],\r\n        value: '0x0'\r\n      }\r\n    } else {\r\n      const output = trade.outputAmount.currency\r\n      if (!(output instanceof Token)) {\r\n        throw new Error('invalid output amount currency')\r\n      }\r\n\r\n      return {\r\n        methodName: 'tokenToTokenTransferOutput',\r\n        args: [\r\n          minimumAmountOut,\r\n          maximumAmountIn,\r\n          MaxUint256.toHexString(),\r\n          deadline,\r\n          options.recipient,\r\n          output.address\r\n        ],\r\n        value: '0x0'\r\n      }\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}